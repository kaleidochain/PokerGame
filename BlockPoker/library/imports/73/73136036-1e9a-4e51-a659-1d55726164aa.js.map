{"version":3,"sources":["assets/scripts/components/ClubRequestMgr.js"],"names":["Log","require","cc","Class","Component","properties","clubApplicationItem","Prefab","_clubApplicationLayout","Layout","_applyMsgTipsLayer","Node","_clubRequestMgrLayer","_rechargeLayer","onLoad","dgame","find","getComponent","utils","addClickEvent","node","clubRequestMgr","_applicationList","schedule","startCheckClubRequest","roomEventMgr","handleJoinClub","_handleJoinClub","bind","data","Trace","JSON","stringify","net","gameCall","_onMyClubs","normalLoading","showLoadTimeout","masterClubIDs","Array","length","i","Dissolved","settings","account","Addr","OwnerAddr","push","ClubID","_checkApplications","_onGetJoinClubApplications","director","getScene","name","count","clubid","active","_updateApplicationList","removeAllChildren","clubApplication","instantiate","init","parseInt","addChild","onBtnApplyMsgTipsClicked","_everApproveOrDeny","mainMenuPopup","disable","approve","addr","approveAddr","approveClubID","approve_cmd","_onApprove","deny","deny_cmd","applications","getChildren","onBtnCloseClubRequestMgrClicked","enable","isTipsActive","hideTips","showTips","start","onDestroy","unschedule"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require(\"Log\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        clubApplicationItem: cc.Prefab,  //俱乐部成员审批预制资源\n        _clubApplicationLayout: cc.Layout,//俱乐部成员审批列表\n        _applyMsgTipsLayer: cc.Node,\n        _clubRequestMgrLayer: cc.Node,\n        _rechargeLayer: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        if (!cc.dgame) {\n            return;\n        }\n        this._rechargeLayer = cc.find(\"Canvas/RechargeLayer\");\n        this._applyMsgTipsLayer = cc.find(\"Canvas/ClubRequestMgr/bg_play_apply_msg\");\n        this._clubRequestMgrLayer = cc.find(\"Canvas/ClubRequestMgr/ClubApplicationsPopup\");\n        this._clubApplicationLayout = cc.find(\"toast_bg/scrollview/view/content\", this._clubRequestMgrLayer).getComponent(cc.Layout);\n        cc.dgame.utils.addClickEvent(cc.find(\"toast_bg/bg_club_popup_close\", this._clubRequestMgrLayer), this.node, \"ClubRequestMgr\", \"onBtnCloseClubRequestMgrClicked\");\n        cc.dgame.utils.addClickEvent(this._applyMsgTipsLayer, this.node, \"ClubRequestMgr\", \"onBtnApplyMsgTipsClicked\");\n        cc.dgame.clubRequestMgr = this;\n        this._applicationList = {};\n        this.schedule(this.startCheckClubRequest, 60);\n        cc.dgame.roomEventMgr.handleJoinClub = this._handleJoinClub.bind(this);\n    },\n\n    _handleJoinClub (data) {\n        Log.Trace(\"[_handleJoinClub] \" + JSON.stringify(data));\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n    },\n\n    _onMyClubs (data) {\n        Log.Trace(\"[ClubRequestMgr:_onMyClubs] \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        let masterClubIDs = new Array();\n        if (!data || !data.length) {\n        } else {\n            for (let i = 0; i < data.length; i++) {\n                if (!data[i].Dissolved) {\n                    //没解散的俱乐部显示在列表中\n                    if (cc.dgame.settings.account.Addr == data[i].OwnerAddr) {\n                        masterClubIDs.push(data[i].ClubID);\n                    }\n                }\n            }\n        }\n        Log.Trace(\"[ClubRequestMgr:_onMyClubs] masterClubID: \" + JSON.stringify(masterClubIDs));\n        //监听我是群主的俱乐部ID的加入申请\n        cc.dgame.net.gameCall([\"joinClubIDs\", JSON.stringify(masterClubIDs)]);\n        this._checkApplications(masterClubIDs);\n    },\n\n    _checkApplications (masterClubIDs) {\n        Log.Trace(\"onClubRequestTimer\");\n        cc.dgame.net.gameCall([\"getJoinClubApplications\", JSON.stringify(masterClubIDs)], this._onGetJoinClubApplications.bind(this));\n    },\n\n    _onGetJoinClubApplications (data) {\n        Log.Trace('[_onGetJoinClubApplications] currentScene: ' + cc.director.getScene().name + ', ' + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        this._applicationList = data;\n        let count = 0;\n        for (let clubid in this._applicationList) {\n            if (!!this._applicationList[clubid] && !!this._applicationList[clubid].length) {\n                count += this._applicationList[clubid].length;\n            }\n        }\n        if (count > 0) {\n            if (this._applyMsgTipsLayer.active == false && this._clubRequestMgrLayer.active == false) {\n                this._applyMsgTipsLayer.active = true;\n            }\n        } else {\n            this._applyMsgTipsLayer.active = false;\n        }\n    },\n\n    _updateApplicationList () {\n        this._clubApplicationLayout.node.removeAllChildren();\n        for (let clubid in this._applicationList) {\n            if (!!this._applicationList[clubid].length) {\n                for (let i = 0; i < this._applicationList[clubid].length; i++) {\n                    let clubApplication = cc.instantiate(this.clubApplicationItem);\n                    clubApplication.getComponent(\"ClubApplicationItem\").init(cc.director.getScene().name, parseInt(clubid), this._applicationList[clubid][i]);\n                    this._clubApplicationLayout.node.addChild(clubApplication);\n                }\n            }\n        }\n    },\n\n    startCheckClubRequest () {\n        //不能放到onLoad，GameHall才初始化cc.dgame.net，在onLoad调用会没有响应\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n    },\n\n    onBtnApplyMsgTipsClicked () {\n        this._applyMsgTipsLayer.active = false;\n        this._clubRequestMgrLayer.active = true;\n        this._everApproveOrDeny = false;\n        if (!!cc.dgame.mainMenuPopup) {\n            cc.dgame.mainMenuPopup.disable();\n        }\n        if (!!this._rechargeLayer) {\n            this._rechargeLayer.active = false;\n        }\n        this._updateApplicationList();\n    },\n\n    approve (clubid, addr) {\n        this.approveAddr = addr;\n        this.approveClubID = clubid;\n        this._everApproveOrDeny = true;\n        var approve_cmd = {\n            ClubID: clubid,\n            Addr: addr,\n        }\n        cc.dgame.net.gameCall([\"approveJoinClub\", JSON.stringify(approve_cmd)], this._onApprove.bind(this));\n    },\n\n    deny (clubid, addr) {\n        this.approveAddr = addr;\n        this.approveClubID = clubid;\n        this._everApproveOrDeny = true;\n        var deny_cmd = {\n            ClubID: clubid,\n            Addr: addr,\n        }\n        cc.dgame.net.gameCall([\"denyJoinClub\", JSON.stringify(deny_cmd)], this._onApprove.bind(this));\n    },\n\n    _onApprove (data) {\n        Log.Trace(\"[_onApprove]\");\n        let applications = new Array();\n        for (let i = 0; i < this._clubApplicationLayout.node.getChildren().length; i++) {\n            let clubApplication = this._clubApplicationLayout.node.getChildren()[i].getComponent(\"ClubApplicationItem\");\n            if (clubApplication.addr != this.approveAddr || clubApplication.clubid != this.approveClubID) {\n                applications.push(this._clubApplicationLayout.node.getChildren()[i]);\n            }\n        }\n\n        this._clubApplicationLayout.node.removeAllChildren();\n        for (let i = 0; i < applications.length; i++) {\n            this._clubApplicationLayout.node.addChild(applications[i]);\n        }\n\n        if (applications.length == 0) {\n            this._applyMsgTipsLayer.active = false;\n        }\n    },\n\n    onBtnCloseClubRequestMgrClicked () {\n        this._clubRequestMgrLayer.active = false;\n        //GameTable的MenuLayer覆盖在GameRequestMgr之上所以进入时要隐藏，退出时恢复\n        if (!!cc.dgame.mainMenuPopup) {\n            cc.dgame.mainMenuPopup.enable();\n        }\n        //GameHall、ClubHall的RechargeLayer覆盖在GameRequestMgr之上所以进入时要隐藏，退出时恢复\n        if (!!this._rechargeLayer) {\n            this._rechargeLayer.active = true;\n        }\n        //返回时再查一遍，没有拒绝和批准的仍然留有Tips按钮\n        if (this._everApproveOrDeny == false) {\n            cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n        }\n    },\n\n    //由于ClubRequestMgr覆盖在GameRequestMgr之上，提供这三个接口供GameRequesstMgr调用\n    isTipsActive () {\n        return this._applyMsgTipsLayer.active == true;\n    },\n\n    hideTips () {\n        this._applyMsgTipsLayer.active = false;\n    },\n\n    showTips() {\n        this._applyMsgTipsLayer.active = true;\n    },\n\n    start () {\n\n    },\n\n    onDestroy () {\n        this.unschedule(this.startCheckClubRequest);\n        if (!!cc.dgame) {\n            cc.dgame.clubRequestMgr = null;\n        }\n    }\n    // update (dt) {},\n});\n"]}