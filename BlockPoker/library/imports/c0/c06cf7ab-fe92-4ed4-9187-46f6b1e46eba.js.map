{"version":3,"sources":["assets/scripts/components/Refresh.js"],"names":["Log","require","cc","Class","Component","properties","_normalLoadingLayer","Node","roomsTypeToggles","Toggle","roomsTypeBackgrounds","Label","roomsListScrollViews","ScrollView","clubListScrollView","onLoad","dgame","_tableTypeMap","_clubTableTypeMap","find","_queryChipsBalanceDone","_queryKALBalanceDone","_queryListTableDone","_queryListClubTableDone","_scene","director","getScene","name","i","length","utils","addToggleClickEvent","node","addClickEvent","refresh","start","_onBalanceOf","data","Trace","JSON","stringify","normalLoading","showLoadTimeout","settings","account","Chips","Balance","currentChipsNum","getComponent","RichText","string","formatValue","_stopInvokeWaiting","_onKALBalance","KAL","parseFloat","currentKALNum","_onListTable","tablelist","Array","_chipsTableList","TableId","Type","DisplayTableId","SmallBlind","push","sort","_sortBuyinMax","gametableList","populateList","parseInt","sys","localStorage","getItem","_roomType","isChecked","check","_onSelectRooms","login","enterRoom","loginData","tableType","ReEnterTableId","selectGameTable","_onListClubTable","clubid","Math","floor","enterClubRoom","clubTableType","index","setItem","active","onRoomsTypeClicked","toggle","indexOf","refreshChips","_startInvokeWaiting","self","scheduleOnce","net","gameCall","bind","refreshKAL","refreshList","roomType","refreshClubList","listclubtable_cmd","ClubID","addComponent","rechargePopup","RefreshData","onBtnRefreshClicked","onDestroy","a","b","BuyinMax","PlayerNum","onBtnQuickStartClicked","onBtnShowExchangeChipsClicked"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require(\"Log\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _normalLoadingLayer: cc.Node,\n        roomsTypeToggles: [cc.Toggle],\n        roomsTypeBackgrounds: [cc.Label],\n        roomsListScrollViews: [cc.ScrollView],\n        clubListScrollView: cc.ScrollView,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        if (!cc.dgame) {\n            return;\n        }\n        this._tableTypeMap = {};\n        this._clubTableTypeMap = {};\n        this._normalLoadingLayer = cc.find(\"Canvas/NormalLoadingLayer\");\n        this._queryChipsBalanceDone = true;\n        this._queryKALBalanceDone = true;\n        this._queryListTableDone = true;\n        this._queryListClubTableDone = true;\n        this._scene = cc.director.getScene().name;\n        for (let i = 0; i < this.roomsTypeToggles.length; i++) {\n            cc.dgame.utils.addToggleClickEvent(this.roomsTypeToggles[i], this.node, \"Refresh\", \"onRoomsTypeClicked\");\n        }\n\n        cc.dgame.utils.addClickEvent(cc.find(\"Canvas/btn_refresh\"), this.node, \"Refresh\", \"onBtnRefreshClicked\");\n        cc.dgame.refresh = this;\n    },\n\n    start () {\n\n    },\n\n    _onBalanceOf (data) {\n        Log.Trace(\"[_onBalanceOf] Scene: \" + cc.director.getScene().name + \", \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        cc.dgame.settings.account.Chips = data.Balance;\n        //这个消息回调的时候有可能已经到其他场景了\n        if (this._scene == cc.director.getScene().name) {\n            this._queryChipsBalanceDone = true;\n            let currentChipsNum = cc.find(\"Canvas/RechargeLayer/ExchangeChips/richtext\").getComponent(cc.RichText);\n            currentChipsNum.string = \"<b>\" + cc.dgame.utils.formatValue(cc.dgame.settings.account.Chips) + \"</b>\";\n            this._stopInvokeWaiting();\n        }\n    },\n\n    _onKALBalance (data) {\n        Log.Trace(\"[_onKALBalance] Scene: \" + cc.director.getScene().name + \", \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        cc.dgame.settings.account.KAL = parseFloat(data.Balance) / 1e18;\n        //这个消息回调的时候有可能已经到其他场景了\n        if (this._scene == cc.director.getScene().name) {\n            this._queryKALBalanceDone = true;\n            let currentKALNum = cc.find(\"Canvas/RechargeLayer/DepositKAL/richtext\").getComponent(cc.RichText);\n            currentKALNum.string = \"<b>\" + cc.dgame.utils.formatValue(cc.dgame.settings.account.KAL) + \"</b>\";\n            this._stopInvokeWaiting();\n        }\n    },\n\n    _onListTable (data) {\n        Log.Trace(\"[_onListTable] Scene: \" + cc.director.getScene().name + \", \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        //这个消息回调的时候有可能已经到其他场景了\n        if (this._scene == cc.director.getScene().name) {\n            this._queryListTableDone = true;\n            this._stopInvokeWaiting();\n            //data = JSON.parse('[{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":3}]');\n            let tablelist = new Array(4);\n            this._chipsTableList = new Array();\n            for (let i = 0; i < tablelist.length; i++) {\n                tablelist[i] = new Array();\n            }\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].TableId > 0xF000000000000) {\n                    data[i].Type = 0;\n                    data[i].DisplayTableId = data[i].TableId - 0xF000000000000;\n                } else {\n                    if (data[i].SmallBlind * 2 < 200) {\n                        data[i].Type = 1;\n                    } else if (data[i].SmallBlind * 2 < 20000) {\n                        data[i].Type = 2;\n                    } else {\n                        data[i].Type = 3;\n                    }\n                    data[i].DisplayTableId = data[i].TableId - 0xE000000000000;\n                }\n                tablelist[data[i].Type].push(data[i]);\n                this._tableTypeMap[data[i].TableId] = data[i].Type;\n                Log.Trace(\"[_onListTable] this._tableTypeMap:\" + JSON.stringify(this._tableTypeMap));\n                if (data[i].Type != 0) {\n                    this._chipsTableList.push(data[i]);\n                }\n            }\n            this._chipsTableList.sort(this._sortBuyinMax);\n            Log.Trace(\"[_onListTable] sorted _chipsTableList: \" + JSON.stringify(this._chipsTableList));\n            for (let i = 0; i < this.roomsListScrollViews.length; i++) {\n                var gametableList = this.roomsListScrollViews[i].getComponent('GametableList');\n                gametableList.populateList(tablelist[i]);\n            }\n            if (!this.roomsTypeToggles[parseInt(cc.sys.localStorage.getItem(this._roomType))].isChecked) {\n                this.roomsTypeToggles[parseInt(cc.sys.localStorage.getItem(this._roomType))].check();\n            } else {\n                this._onSelectRooms(parseInt(cc.sys.localStorage.getItem(this._roomType)));\n            }\n        }\n        if (!!cc.dgame.login && cc.dgame.login.enterRoom == true) {\n            Log.Trace(\"[_onListTable] onLogin cc.dgame.login.data:\" + JSON.stringify(cc.dgame.login.data));\n            cc.dgame.login.enterRoom = false;\n            let loginData = cc.dgame.login.data;\n            let tableType = this._tableTypeMap[loginData.ReEnterTableId];\n            if (tableType != null) {\n                Log.Trace(\"[_onListTable] onLogin tableType \" + tableType);\n                let gametableList = this.roomsListScrollViews[tableType].getComponent(\"GametableList\");\n                gametableList.selectGameTable(loginData.ReEnterTableId)\n            }\n        }\n    },\n\n\n    _onListClubTable (data) {\n        Log.Trace(\"[_onListClubTable] Scene: \" + cc.director.getScene().name + \", \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        //这个消息回调的时候有可能已经到其他场景了\n        if (this._scene == cc.director.getScene().name) {\n            this._queryListClubTableDone = true;\n            this._stopInvokeWaiting();\n            if (!!this.clubListScrollView) {\n                //data = JSON.parse('[{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":0},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":1},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":2},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":1,\"TableId\":1,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":2,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":3,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":4,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":5,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":6,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":7,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":8,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":9,\"Type\":3},{\"Ante\":5,\"BuyinMax\":800,\"BuyinMin\":200,\"CurrentStatu\":0,\"MaxNum\":8,\"MinNum\":2,\"PlayerNum\":1,\"SmallBlind\":5,\"Straddle\":0,\"TableId\":10,\"Type\":3}]');\n                let tablelist = new Array();\n                for (let i = 0; i < data.length; i++) {\n                    let clubid = Math.floor(data[i].TableId / 0x10000000);\n                    data[i].DisplayTableId = data[i].TableId - clubid * 0x10000000;\n                    tablelist.push(data[i]);\n                    this._clubTableTypeMap[data[i].TableId] = 1\n                }\n                tablelist.sort(this._sortBuyinMax);\n                Log.Trace(\"[_onListClubTable] tablelist: \" + JSON.stringify(tablelist));\n                var gametableList = this.clubListScrollView.getComponent('ClubGameTableList');\n                gametableList.populateList(tablelist);\n            }\n        }\n        if (!!cc.dgame.login && cc.dgame.login.enterClubRoom == true) {\n            Log.Trace(\"[_onListClubTable] onLogin cc.dgame.login.data:\" + JSON.stringify(cc.dgame.login.data));\n            cc.dgame.login.enterClubRoom = false;\n            let loginData = cc.dgame.login.data;\n            let clubTableType = this._clubTableTypeMap[loginData.ReEnterTableId];\n            if (clubTableType != null) {\n                Log.Trace(\"[_onListClubTable] onLogin clubTableType \" + clubTableType);\n                let gametableList = this.clubListScrollView.getComponent(\"ClubGameTableList\");\n                gametableList.selectGameTable(loginData.ReEnterTableId)\n            }\n        }\n    },\n\n    _onSelectRooms (index) {\n        for (let i = 0; i < this.roomsTypeBackgrounds.length; i++) {\n            if (index == i) {\n                cc.sys.localStorage.setItem(this._roomType, index);\n                this.roomsTypeBackgrounds[i].node.active = false;\n                this.roomsListScrollViews[i].node.active = true;\n            } else {\n                this.roomsTypeBackgrounds[i].node.active = true;\n                this.roomsListScrollViews[i].node.active = false;\n            }\n        }\n    },\n\n    onRoomsTypeClicked (toggle) {\n        var index = this.roomsTypeToggles.indexOf(toggle);\n        this._onSelectRooms(index);\n    },\n\n    refreshChips () {\n        this._queryChipsBalanceDone = false;\n        this._scene = cc.director.getScene().name;\n        this._startInvokeWaiting();\n        let self = this;\n        this.scheduleOnce(function () {\n            cc.dgame.net.gameCall([\"balanceOf\", \"\"], self._onBalanceOf.bind(self));\n        }, 0.05);\n    },\n\n    refreshKAL () {\n        this._queryKALBalanceDone = false;\n        this._scene = cc.director.getScene().name;\n        this._startInvokeWaiting();\n        let self = this;\n        this.scheduleOnce(function () {\n            cc.dgame.net.gameCall([\"KalBalance\", \"\"], self._onKALBalance.bind(self));\n        }, 0.05);\n    },\n\n    refreshList (roomType) {\n        this._startInvokeWaiting();\n        this._roomType = roomType;\n        this._queryListTableDone = false;\n        this._scene = cc.director.getScene().name;\n        let self = this;\n        this.scheduleOnce(function () {\n            cc.dgame.net.gameCall([\"listfreetable\", \"\"], self._onListTable.bind(self));\n        }, 0.05);\n    },\n\n    refreshClubList () {\n        this._startInvokeWaiting();\n        this._queryListClubTableDone = false;\n        let self = this;\n        this.scheduleOnce(function () {\n            var listclubtable_cmd = {\n                ClubID: cc.dgame.settings.account.ClubID,\n            }\n            cc.dgame.net.gameCall([\"listclubtable\", JSON.stringify(listclubtable_cmd)], self._onListClubTable.bind(self));\n        }, 0.05);\n    },\n\n    _startInvokeWaiting () {\n        if (this._normalLoadingLayer.active) {\n            return;\n        }\n        this._normalLoadingLayer.active = true;\n    },\n\n    _stopInvokeWaiting () {\n        if (this._queryChipsBalanceDone && this._queryKALBalanceDone) {\n            if (this._queryListTableDone && this._queryListClubTableDone) {\n                this._normalLoadingLayer.active = false;\n            }\n            this.addComponent(\"RechargePopup\");\n            cc.dgame.rechargePopup.RefreshData();\n        }\n    },\n\n    onBtnRefreshClicked () {\n        this.refreshChips();\n        this.refreshKAL();\n        if (!!this._roomType) {\n            this.refreshList(this._roomType);\n        }\n        if (!!cc.dgame.settings.account.ClubID) {\n            this.refreshClubList();\n        }\n    },\n\n    onDestroy () {\n        if (!!cc.dgame) {\n            cc.dgame.refresh = null;\n        }\n    },\n\n    //根据最大带入金额从大到小排序，相同金额人数多的优先，桌号小的优先\n    _sortBuyinMax (a, b) {\n        if (parseInt(a.BuyinMax) == parseInt(b.BuyinMax)) {\n            if (parseInt(a.PlayerNum) == parseInt(b.PlayerNum)) {\n                return parseInt(b.TableId) - parseInt(a.TableId);\n            }\n            return parseInt(b.TableId) - parseInt(a.TableId);\n        }\n\n        return parseInt(a.BuyinMax) - parseInt(b.BuyinMax);\n    },\n\n    onBtnQuickStartClicked () {\n        for (let i = 0; i < this._chipsTableList.length; i++) {\n            var gametableList = this.roomsListScrollViews[this._chipsTableList[i].Type].getComponent(\"GametableList\");\n            Log.Trace(\"[onBtnQuickStartClicked] tableid: \" + this._chipsTableList[i].TableId + \", chips: \" + cc.dgame.settings.account.Chips + \", BuyinMax: \" + this._chipsTableList[i].BuyinMax + \", 5 * BuyinMax / 2: \" + 5 * parseInt(this._chipsTableList[i].BuyinMax) / 2);\n            if (cc.dgame.settings.account.Chips > 5 * parseInt(this._chipsTableList[i].BuyinMax) / 2 && this._chipsTableList[i].PlayerNum < 9) {\n                return gametableList.selectGameTable(this._chipsTableList[i].TableId);\n            }\n        }\n\n        cc.dgame.rechargePopup.onBtnShowExchangeChipsClicked();\n    },\n    // update (dt) {},\n});\n"]}