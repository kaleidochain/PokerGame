{"version":3,"sources":["assets/scripts/Game/GameHall.js"],"names":["Log","require","cc","Class","Component","properties","loadinglayer","Node","loadingTips","Label","loadingIconLayer","btnRetryRunGame","Button","btnRetryOpen","blockInputLayer","_onSelfAddress","data","Trace","dgame","gameplay","selfaddr","toLowerCase","_onLogin","login","loginData","JSON","parse","ReEnterTableId","clubFlag","parseInt","enterRoom","enterClubRoom","scheduleOnce","director","loadScene","refresh","refreshList","_onRunGame","length","indexOf","Error","utils","getNowFormatDate","net","connected","active","gameCall","bind","refreshChips","refreshKAL","Promotion","promotion","giveMeToken","invitation","startCheck","exchangeRate","startCheckExchangeRate","roomEventMgr","startListen","gameRequestMgr","startCheckGameRequest","clubRequestMgr","startCheckClubRequest","settings","account","Password","sys","isNative","isMobile","os","OS_IOS","jsb","reflection","callStaticMethod","OS_ANDROID","node","runGame","self","rungame_cmd","game_nodes","stringify","onOpen","Debug","fn","ret","url","getScene","name","_retType","status","nodelist","Array","port","enodeid","enode","substring","rpc","push","onLoad","dump","Info","isRunning","OS_WINDOWS","OS_OSX","IsRunning","startGengine","preloadScene","Addr","StartNode","update","dt","onBtnQuickStartClicked"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require(\"Log\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        loadinglayer: cc.Node,\n        loadingTips: cc.Label,\n        loadingIconLayer: cc.Node,\n        btnRetryRunGame: cc.Button,\n        btnRetryOpen: cc.Button,\n        blockInputLayer: cc.Node,\n    },\n\n    _onSelfAddress (data) {\n        Log.Trace(\"[_onSelfAddress]\" + data);\n        if (typeof(data) === \"string\") {\n            cc.dgame.gameplay.selfaddr = data.toLowerCase();\n        }\n    },\n\n    _onLogin(data) {\n        Log.Trace(\"[_onLogin] data: \" + data);\n        cc.dgame.login = {};\n        let loginData = JSON.parse(data);\n        if (loginData.ReEnterTableId > 0 ) {\n            cc.dgame.login.data = loginData;\n            let clubFlag = parseInt(loginData.ReEnterTableId) < 0xE000000000000;\n            Log.Trace(\"[_onLogin] clubFlag: \" + clubFlag);\n            if (clubFlag != true) {\n                cc.dgame.login.enterRoom = true;\n            } else {\n                cc.dgame.login.enterClubRoom = true;\n                this.scheduleOnce(function () {\n                    cc.director.loadScene('ClubHall');\n                }, 0.05);\n            }\n        }\n        cc.dgame.refresh.refreshList(\"roomType\");\n    },\n\n    _onRunGame (data) {\n        Log.Trace(\"load complete(\" + data + \")\");\n        if (data.length > 25) {\n            if (data.indexOf(\"msglist.txt: no such file or directory\") !== -1) {\n                Log.Error(\"_onRunGame msglist.txt: no such file or directory\");\n            }\n        }\n        Log.Trace(cc.dgame.utils.getNowFormatDate() + \" before _onRunGame\");\n        if (parseInt(data) === 0) {\n            cc.dgame.net.connected = true;\n            this.loadinglayer.active = false;\n            cc.dgame.net.gameCall([\"Play_Login\", \"\"], this._onLogin.bind(this));\n            cc.dgame.refresh.refreshChips();\n            cc.dgame.refresh.refreshKAL();\n            var Promotion = require(\"Promotion\");\n            cc.dgame.promotion = new Promotion();\n            cc.dgame.promotion.giveMeToken();\n            cc.dgame.invitation.startCheck();\n            cc.dgame.exchangeRate.startCheckExchangeRate();\n            cc.dgame.roomEventMgr.startListen();\n            cc.dgame.gameRequestMgr.startCheckGameRequest();\n            cc.dgame.clubRequestMgr.startCheckClubRequest();\n            cc.dgame.net.gameCall([\"dismissExipredClubTable\", \"\"]);\n            delete cc.dgame.settings.account.Password;\n        } else {\n            if (cc.sys.isNative) {\n                if (cc.sys.isMobile) {\n                    if (cc.sys.os === cc.sys.OS_IOS) {\n                        jsb.reflection.callStaticMethod(\"NativeGengine\", \"clearCacheWithExcludeDirs:andFiles:\", \"keystore,logs\", \"deal.txt,exportlist.txt,jsb.sqlite,msglist.txt,portal.lua,key.txt\")\n                    } else if (cc.sys.os === cc.sys.OS_ANDROID) {\n                        jsb.reflection.callStaticMethod(\"io/kaleidochain/NativeGengine\", \"clearCacheWithExcludeDirsAndFiles\", \"(Ljava/lang/String;Ljava/lang/String;)V\", \"keystore,logs\", \"deal.txt,exportlist.txt,jsb.sqlite,msglist.txt,portal.lua,key.txt\")\n                    }\n                } else {\n\n                }\n            }\n            this.loadingTips.node.active = true;\n            this.loadingIconLayer.active = false;\n            this.btnRetryRunGame.node.active = true;\n        }\n        Log.Trace(cc.dgame.utils.getNowFormatDate() + \" after _onRunGame\");\n    },\n\n    runGame () {\n        this.loadinglayer.active = true;\n        this.loadingTips.node.active = false;\n        this.loadingIconLayer.active = true;\n        this.btnRetryRunGame.node.active = false;\n        let self = this;\n        this.scheduleOnce(function () {\n            var rungame_cmd = {\n                game_nodes: JSON.parse(cc.dgame.settings.game_nodes)\n            }\n            Log.Trace(cc.dgame.utils.getNowFormatDate() + \" before rungame\");\n            cc.dgame.net.gameCall([\"rungame\", JSON.stringify(rungame_cmd)], self._onRunGame.bind(self))\n            Log.Trace(cc.dgame.utils.getNowFormatDate() + \" after rungame\");\n        }, 0.05);\n    },\n\n    onOpen () {\n        Log.Debug(\"GameHall onOpen\");\n        cc.dgame.settings.onOpen = true;\n        \n        this.blockInputLayer.active = false;\n        this.loadinglayer.active = true;\n        this.loadingTips.node.active = false;\n        this.loadingIconLayer.active = true;\n        this.btnRetryOpen.node.active = false;\n        //cc.dgame.net.sendMsg([\"selfaddress\", \"\"], this._onSelfAddress.bind(this));\n        //cc.dgame.net.gameCall([\"selfaddress\", \"\"], 'cc.find(\"GameHall\").getComponent(\"GameHall\")._onSelfAddress');\n        cc.dgame.net.gameCall([\"selfaddress\", \"\"], this._onSelfAddress.bind(this));\n        //cc.dgame.settings.game_contract_addr = \"d70caa15134f0f282de490a3185f049c68b87760\";\n//        cc.dgame.settings.game_contract_addr = \"1bdcf5a17b71328ec92f6eb7f083691cfa8e095e\";\n        //cc.dgame.settings.game_nodes = JSON.stringify([\"enode://9b93cf2e45d98d3c95c432ea0858bc41e3148bcb36226e9143c0780ba85e24b796a6e3c2401b7ff756ac7f1058310ca563f20700c3371930639feaa94505da1d\"])\n//        cc.dgame.settings.game_nodes = JSON.stringify([\"enode://d60ca04981d26562db7e090231b35137fbfa4eee5e2fefe4fad074db4c86abc228c4897578f2ea827b413fc3ddb85ba75f6c7b02e6c70e4daaa8642612214b36@192.168.0.212:38883\"]);\n        //合约选BB版\n        // cc.dgame.settings.game_contract_addr = \"9422fea536c5d50f538ba369382221b380f1be7c\";\n        // cc.dgame.settings.game_nodes = JSON.stringify([\"enode://95f411dced5e748e2b88ea622fd9ac827e28829a17c87be072b954c99bd3759444f7b80732276417374114380d406fa4543abd147674d173cc66cddd5bedc2bf@192.168.0.211:38883\"]);\n        //cc.dgame.settings.game_contract_addr = \"51cf507cace7279c5a59bd7f91c23842f205d20a\";\n        //cc.dgame.settings.game_contract_addr = \"3598f25eb914d23be556069d73b6961f8dc80766\";\n        //cc.dgame.settings.game_contract_addr = \"d178f5cac82018a52a811cb5e5778599cc276fca\";\n        //cc.dgame.settings.game_contract_addr = \"51091b5420b9e678f5c7f3e66c56958dbdf8c72b\";\n        // cc.dgame.settings.game_contract_addr = \"68441307fad8d6086f4e91740510750b353ef163\";\n        // cc.dgame.settings.game_nodes = JSON.stringify([\"enode://d60ca04981d26562db7e090231b35137fbfa4eee5e2fefe4fad074db4c86abc228c4897578f2ea827b413fc3ddb85ba75f6c7b02e6c70e4daaa8642612214b36@192.168.0.212:38883\"]);\n        //cc.dgame.settings.game_nodes = JSON.stringify([\"enode://78afd98ec657a7320cb984ffc7c701ef439f717e1267b43fee7c8101e08939cafb2d7518eef69d4a0b982b5f206416036397f513b7817186249064063f4ce8d2@192.168.0.213:38883\"]);\n        //cc.dgame.settings.game_nodes = JSON.stringify([\"enode://3e256d081ca0bad611b3384058028f1640459f5d956f48644ccb37942ae7bbf9e06a15e6ed69a504a937d03e2be690c7e8e60372588bc3babc3caf4f663d4e95@106.75.184.214:38883\"]);\n        var self = this;\n        var fn = function(ret, url) {\n            Log.Debug(\"sendRequest ret: \" + JSON.stringify(ret) + \", url: \" + url + \", currentScene: \" + cc.director.getScene().name);\n            Log.Debug(\"sendRequest rettype: \" + self._retType);\n            if (cc.director.getScene().name == \"GameHall\" && !self._retType) {\n                if (!ret) {\n                    self.loadingTips.node.active = true;\n                    self.loadingIconLayer.active = false;\n                    self.btnRetryOpen.node.active = true;\n                } else if (ret.status == 0) {\n                    self._retType = url;\n                    self.loadinglayer.active = false;\n                    var nodelist = new Array();\n                    var port = ret.enodeid.indexOf(\"@\", 6);\n                    if (port != -1) {\n                        var enode = ret.enodeid.substring(0, port + 1) + ret.rpc;\n                        nodelist.push(enode);\n                        cc.dgame.settings.game_nodes = JSON.stringify(nodelist);\n                        self.runGame();\n                    }\n                }\n            }\n        }\n        // cc.dgame.http.sendRequest(\"/mainnet\", null, fn);\n        // cc.dgame.http.sendRequest(\"/mainnet\", null, fn, \"https://enode.kalscan.io\");\n        //cc.dgame.http.sendRequest(\"/testnet\", null, fn);\n        //cc.dgame.http.sendRequest(\"/testnet\", null, fn, \"https://enode.kalscan.io\");\n        // this.scheduleOnce(function () {\n        //     fn({\"status\":0,\"message\":\"OK\",\"enodeid\":\"enode://252d1ff88dd0ea166042c12161df06e923f82367fe8281122b313859aa9182d0b72a2b85299dd7efbff4d5c789d724b84f27e7f410f9cd6d63393931c40a8b60@106.75.184.214:38885\",\"rpc\":\"106.75.184.214:8548\"});\n        // }, 1);\n        this.scheduleOnce(function () {\n            fn({\"status\":0,\"message\":\"OK\",\"enodeid\":\"enode://d1ff6cd02c6babb3f43e0134116794e03049374e8f43e2624762288440221dc060c0e728b39bec59af8bf0c7eccdfa3798dc9bcf6617affd2b6b191233fcda31@45.249.245.3:38884\",\"rpc\":\"45.249.245.3:38548\"});\n        }, 1);\n\n\n        //cc.dgame.settings.game_nodes = JSON.stringify([\"enode://9a094a1f7b42b440368be84498de61111a322eb23d3c4490cbd6dc4340477aba84d7fcf4a6b433567fed502650e87029452fbc065990a330007b10f064f53166@106.75.184.214:8548\"])\n        //cc.dgame.settings.game_nodes = JSON.stringify(['enode://4f8a610c0fdff91859ab0e3eed18a73a445a88fc6025554ffc05edb9e8a3559856691b2f33e112d4d49ecd57a426893066c80cd5528c939df63413c17e35f076@192.168.0.214:8546'])\n        //cc.dgame.settings.game_nodes = JSON.stringify([\"enode://3e256d081ca0bad611b3384058028f1640459f5d956f48644ccb37942ae7bbf9e06a15e6ed69a504a937d03e2be690c7e8e60372588bc3babc3caf4f663d4e95\",\"enode://5ec49e44aaa69e10e69c8cc90955f0172984bc876088acb0815c12cb87f346e20239f8e4efcdc5b3b44edd8c9af58049c46490243b76b1844bd266ec277a7ffd\",\"enode://38074d24f5aa21c64acf87b4cd793b0be205280ee5d5dbb1a51c14be9e8097c46b2d4341b5cf5449e4fa073fa53341529bf60922adb13c25a3ee50442f346be7\",\"enode://45d7a87c48d6c293473250fb9353ed77af83d278772b305e2934b014588f3746248b5b1a49054fa36b52e939624a08377fe04f7f87decc7b803e7d2ee6ec13d3\"]);\n        //this.runGame();\n    },\n\n    // use this for initialization\n    onLoad () {\n        Log.Trace(\"[GameHall:onLoad]\");\n        //this.onListTable(\"\");\n        //return;\n        //this.nickname.string = cc.dgame.settings.account.Nickname\n        cc.sys.dump();\n        Log.Info(\"cc.sys.isNative = \" + cc.sys.isNative)\n        var isRunning = false;\n        if (cc.sys.isNative) {\n            if (cc.sys.isMobile) {\n                if (cc.sys.os === cc.sys.OS_IOS) {\n                    isRunning = jsb.reflection.callStaticMethod(\"NativeGengine\", \"isRunning\");\n                } else if (cc.sys.os === cc.sys.OS_ANDROID) {\n                    isRunning = jsb.reflection.callStaticMethod(\"io/kaleidochain/NativeGengine\", \"isRunning\", \"()Z\");\n                }\n            } else {\n                if (cc.sys.os === cc.sys.OS_WINDOWS||cc.sys.os === cc.sys.OS_OSX) {\n                    isRunning = IsRunning();\n                }\n            }\n        }\n        Log.Info(\"isRunning = \" + isRunning);\n        if (!isRunning) {\n            this.scheduleOnce(this.startGengine, 0.1)\n        } else {\n            Log.Debug(\"cc.dgame.settings.onOpen: \" + cc.dgame.settings.onOpen);\n            if (cc.dgame.settings.onOpen == false) {\n                this.onOpen();\n            } else {\n                cc.dgame.roomEventMgr.startListen();\n                this.blockInputLayer.active = false;\n                cc.dgame.refresh.refreshChips();\n                cc.dgame.refresh.refreshKAL();\n                cc.dgame.refresh.refreshList(\"roomType\");\n                cc.dgame.gameRequestMgr.startCheckGameRequest();\n                cc.dgame.clubRequestMgr.startCheckClubRequest();\n            }\n        }\n        cc.director.preloadScene(\"GameTable\", function () {\n            Log.Trace(\"Next scene preloaded\");\n        });\n    },\n\n    startGengine: function() {\n        Log.Debug(\"startGengine start\");\n        var ret = false;\n        if (cc.sys.isNative) {\n            if (cc.sys.isMobile) {\n                if (cc.sys.os === cc.sys.OS_IOS) {\n                    ret = jsb.reflection.callStaticMethod(\"NativeGengine\", \"startGameEngineWithAccount:andPassword:\", cc.dgame.settings.account.Addr, cc.dgame.settings.account.Password)\n                } else if (cc.sys.os === cc.sys.OS_ANDROID) {\n                    ret = jsb.reflection.callStaticMethod(\"io/kaleidochain/NativeGengine\", \"startGameEngineWithAccountAndPassword\", \"(Ljava/lang/String;Ljava/lang/String;)Z\", cc.dgame.settings.account.Addr, cc.dgame.settings.account.Password)\n                }\n            } else {\n                if (cc.sys.os === cc.sys.OS_WINDOWS||cc.sys.os === cc.sys.OS_OSX) {\n                    ret = StartNode(cc.dgame.settings.account.Addr, cc.dgame.settings.account.Password);\n                }\n            }\n        }\n        Log.Debug(\"startGengine ret=\"+ret);\n        if (ret === false) {\n            if (cc.sys.isNative) {\n                if (cc.sys.isMobile) {\n                    if (cc.sys.os === cc.sys.OS_IOS) {\n                        jsb.reflection.callStaticMethod(\"NativeGengine\", \"callNativeUIWithTitle:andContent:\", \"Gengine启动失败\",\"启动失败\")\n                    } else if (cc.sys.os === cc.sys.OS_ANDROID) {\n                        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"showAlertDialog\", \"(Ljava/lang/String;Ljava/lang/String;)V\", \"Gengine启动失败\",\"启动失败\")\n                    }\n                } else {\n                    if (cc.sys.os === cc.sys.OS_WINDOWS||cc.sys.os === cc.sys.OS_OSX) {\n                        Log.Error(\"Gengine启动失败\");\n                    }\n                }\n            }\n        } else {\n            this.onOpen();\n        }\n    },\n\n    // called every frame\n    update: function (dt) {\n\n    },\n\n    onBtnQuickStartClicked () {\n        cc.dgame.refresh.onBtnQuickStartClicked();\n    },\n});\n"]}