{"version":3,"sources":["assets/scripts/Game/ClubHall.js"],"names":["Log","require","cc","Class","Component","properties","noClubLayer","Node","clubLayer","joinClubLayer","joinClubToastLayer","createClubLayer","newClubName","EditBox","currentClubID","Label","clubNums","RichText","clubMembersLayer","clubMemberItem","Prefab","clubMembersLayout","Layout","clubApplicationLayer","clubApplicationItem","clubApplicationLayout","btnKickout","btnDissolve","btnKickoutCancel","btnKickoutConfirm","btnQuitClub","kickoutMemberToastLayer","dissolveClubToastLayer","quitClubToastLayer","clubMemberNum","normalLoadingLayer","operationTipsBackground","operationTips","btnCreateRoom","onLoad","Trace","dgame","refresh","refreshChips","refreshKAL","exchangeRate","startCheckExchangeRate","roomEventMgr","startListen","gameRequestMgr","startCheckGameRequest","director","preloadScene","active","roompassword","Array","clubList","_isClubMaster","_isSelectedClubMaster","_createClubThreshold","handleNewClub","_handleNewClub","bind","handleJoinClub","_handleJoinClub","handleJoinClubApproved","_handleJoinClubApproved","handleCreateTable","_handleCreateTable","net","gameCall","settings","account","ClubID","string","utils","formatClubID","_onCreateClubThreshold","_onMyClubs","schedule","_checkMyClubInfo","onDestroy","unschedule","data","normalLoading","showLoadTimeout","update","dt","onBtnNewGameClicked","loadScene","onBtnCreateClubClicked","onBtnCloseCreateClubClicked","onBtnJoinClubClicked","onBtnCloseJoinClubClicked","onBtnNumpad0Clicked","length","push","_updateRoomPassword","onBtnNumpad1Clicked","onBtnNumpad2Clicked","onBtnNumpad3Clicked","onBtnNumpad4Clicked","onBtnNumpad5Clicked","onBtnNumpad6Clicked","onBtnNumpad7Clicked","onBtnNumpad8Clicked","onBtnNumpad9Clicked","onBtnNumpadDeleteClicked","pop","onBtnNumpadResetClicked","_foundInClubList","clubID","i","parseInt","joinClubID","clubinfo_cmd","JSON","stringify","_onClubInfo","updateClubID","Dissolved","find","getComponent","ClubName","_showTips","onBtnCreateClubConfirmClicked","Chips","startInvokeWaiting","newclub_cmd","_onCreateClub","clubInfo","Errstr","stopInvokeWaiting","onBtnCreateRoomClicked","onBtnJoinClubApplyClicked","joinclub_cmd","_onJoinClub","onBtnJoinClubCanceClicked","onBtnShowClubMembersClicked","ownerAddr","Addr","onBtnCloseClubMembersClicked","onBtnKickoutClicked","node","getChildren","clubMember","accountAddr","preSelect","onBtnDissolveClicked","onBtnDissolveClubToastDissolveClicked","dissolveclub_cmd","_onDissolveClub","_checkCloseClub","_checkCloseClubCount","_onCheckCloseClub","foundClub","OwnerAddr","onBtnDissolveClubToastCancelClicked","onBtnKickoutToastConfirmClicked","kickout_cmd","kickoutAddr","_onKickout","clubMembers","removeAllChildren","instantiate","init","addChild","onBtnKickoutToastCancelClicked","onBtnKickoutCancelClicked","unpreSelect","onBtnQuitClubClicked","onBtnQuitClubConfirmClicked","quitclub_cmd","_onQuitClub","_checkQuitClub","_checkQuitClubCount","_onCheckQuitClub","onBtnQuitClubCancelClicked","onBtnDropdownClubListClicked","dropdownMenu","blockLayer","clubMenu","menuPos","convertToWorldSpaceAR","v2","dropdownPos","y","height","setPosition","parent","convertToNodeSpaceAR","_masterClubIDs","sys","localStorage","setItem","_checkApplications","valid","Math","random","_updateClubMenu","refreshClubList","clubmembers_cmd","_onClubMembers","_onNewClub","getScene","name","isMaster","getMasterByClubID","subCreateTable_cmd","populateList","_applicationIcon","notification","_onGetJoinClubApplications","newAppliers","applierNum","_applicationList","count","clubid","formatRichText","_updateApplicationList","clubApplication","showKickoutMemberToast","memberAddr","assetMgr","idx","substr","isNaN","Sprite","spriteFrame","heads","msg","overflow","Overflow","NONE","setContentSize","Size","_forceUpdateRenderData","textWidth","min","width","round","RESIZE_HEIGHT","textHeight","opacity","runAction","sequence","delayTime","fadeOut","onBtnShowClubApplicationClicked","onBtnCloseClubApplicationClicked","approve","addr","approveAddr","approveClubID","approve_cmd","_onApprove","deny","deny_cmd","applications","createTableInfo","onBtnRefreshClicked"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require('Log');\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        noClubLayer: cc.Node,       //没有加入俱乐部时的界面\n        clubLayer: cc.Node,         //已加入俱乐部后的界面\n        joinClubLayer: cc.Node,     //加入俱乐部界面\n        joinClubToastLayer: cc.Node,//加入俱乐部确认对话框\n        createClubLayer: cc.Node,   //创建俱乐部界面\n        newClubName: cc.EditBox,    //创建俱乐部输入俱乐部名称\n        currentClubID: cc.Label,    //当前俱乐部ID\n        clubNums: [cc.RichText],    //房间密码\n        clubMembersLayer: cc.Node,  //俱乐部成员界面\n        clubMemberItem: cc.Prefab,  //俱乐部成员头像预制资源\n        clubMembersLayout: cc.Layout,//俱乐部成员列表\n        clubApplicationLayer: cc.Node,  //俱乐部成员审批界面\n        clubApplicationItem: cc.Prefab,  //俱乐部成员审批预制资源\n        clubApplicationLayout: cc.Layout,//俱乐部成员审批列表\n        btnKickout: cc.Node,        //俱乐部成员弹窗踢出按钮（群主视角）\n        btnDissolve: cc.Node,       //俱乐部成员弹窗解散按钮（群主视角）\n        btnKickoutCancel: cc.Node,  //俱乐部成员弹窗取消踢出按钮（群主点击踢出按钮后）\n        btnKickoutConfirm: cc.Node, //俱乐部成员弹窗确认解散按钮（群主点击踢出按钮后）\n        btnQuitClub: cc.Node,       //俱乐部成员弹窗退出按钮（成员视角）\n        kickoutMemberToastLayer: cc.Node,//俱乐部踢出成员确认对话框\n        dissolveClubToastLayer: cc.Node,//解散俱乐部确认对话框\n        quitClubToastLayer: cc.Node,//退出俱乐部确认对话框\n        clubMemberNum: cc.Label,    //俱乐部成员个数\n        normalLoadingLayer: cc.Node,//等待界面\n        operationTipsBackground: cc.Node,//操作提示背景\n        operationTips: cc.Label,    //操作提示\n        btnCreateRoom: cc.Node,\n    },\n\n    // use this for initialization\n    onLoad () {\n        Log.Trace(\"[ClubHall:onLoad]\");\n        cc.dgame.refresh.refreshChips();\n        cc.dgame.refresh.refreshKAL();\n        cc.dgame.exchangeRate.startCheckExchangeRate();\n        cc.dgame.roomEventMgr.startListen();\n        cc.dgame.gameRequestMgr.startCheckGameRequest();\n        cc.director.preloadScene('GameTable', function () {\n            Log.Trace('Next scene preloaded');\n        });\n        this.btnKickout.active = false;\n        this.btnDissolve.active = false;\n        this.btnKickoutCancel.active = false;\n        this.btnKickoutConfirm.active = false;\n        this.btnQuitClub.active = false;\n        this.roompassword = new Array();\n        this.clubList = new Array();\n        this._isClubMaster = false;\n        this._isSelectedClubMaster = false;\n        this._createClubThreshold = 100;\n        cc.dgame.roomEventMgr.handleNewClub = this._handleNewClub.bind(this);\n        cc.dgame.roomEventMgr.handleJoinClub = this._handleJoinClub.bind(this);\n        cc.dgame.roomEventMgr.handleJoinClubApproved = this._handleJoinClubApproved.bind(this);\n        cc.dgame.roomEventMgr.handleCreateTable = this._handleCreateTable.bind(this);\n        //监听我加入俱乐部\n        cc.dgame.net.gameCall([\"listenMyJoinClub\", \"\"]);\n        if (!!cc.dgame.settings.account.ClubID) {\n            this.currentClubID.string = cc.dgame.utils.formatClubID(cc.dgame.settings.account.ClubID);\n        }\n\n        cc.dgame.net.gameCall([\"createClubThreshold\", \"\"], this._onCreateClubThreshold.bind(this));\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n        this.schedule(this._checkMyClubInfo, 60);\n    },\n\n    onDestroy () {\n        cc.dgame.net.gameCall([\"unsubscribeCreateTable\", \"\"]);\n        this.unschedule(this._checkMyClubInfo);\n    },\n\n    _checkMyClubInfo () {\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n    },\n\n    _onCreateClubThreshold (data) {\n        Log.Trace(\"[_onCreateClubThreshold] \" + data);\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        this._createClubThreshold = data;\n    },\n\n    // called every frame\n    update: function (dt) {\n\n    },\n\n    onBtnNewGameClicked () {\n        cc.director.loadScene('CreateTable');\n    },\n\n    onBtnCreateClubClicked () {\n        this.createClubLayer.active = true;\n    },\n\n    onBtnCloseCreateClubClicked () {\n        this.createClubLayer.active = false;\n    },\n\n    onBtnJoinClubClicked () {\n        this.joinClubLayer.active = true;\n    },\n\n    onBtnCloseJoinClubClicked () {\n        this.joinClubLayer.active = false;\n    },\n\n    onBtnNumpad0Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('0');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad1Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('1');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad2Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('2');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad3Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('3');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad4Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('4');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad5Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('5');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad6Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('6');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad7Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('7');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad8Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('8');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpad9Clicked () {\n        if (this.roompassword.length < 6) {\n            this.roompassword.push('9');\n            this._updateRoomPassword();\n        }\n    },\n\n    onBtnNumpadDeleteClicked () {\n        this.roompassword.pop();\n        this._updateRoomPassword();\n    },\n\n    onBtnNumpadResetClicked () {\n        this.roompassword = new Array();\n        this._updateRoomPassword();\n    },\n\n    _foundInClubList (clubID) {\n        for (let i = 0; i < this.clubList.length; i++) {\n            if (parseInt(clubID) == parseInt(this.clubList[i].ClubID)) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _updateRoomPassword () {\n        this.joinClubID = 0;\n        for (let i = 0; i < this.clubNums.length; i++) {\n            if (i < this.roompassword.length) {\n                this.clubNums[i].string = '<b>' + this.roompassword[i] + '</b>';\n                this.joinClubID = this.joinClubID * 10 + parseInt(this.roompassword[i]);\n            } else {\n                this.clubNums[i].string = '';\n            }\n        }\n\n        if (this.roompassword.length == 6) {\n            if (!this._foundInClubList(this.joinClubID)) {  //不在已有的俱乐部列表中，则申请\n                var clubinfo_cmd = {\n                    ClubID: this.joinClubID,\n                }\n                cc.dgame.net.gameCall([\"clubInfo\", JSON.stringify(clubinfo_cmd)], this._onClubInfo.bind(this));\n            } else {    //申请加入的俱乐部已在俱乐部列表中，则切换到该俱乐部\n                this.updateClubID(this.joinClubID);\n                this.onBtnCloseJoinClubClicked();\n            }\n        }\n    },\n\n    _onClubInfo (data) {\n        Log.Trace(\"[_onClubInfo] \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n\n        if (parseInt(data.ClubID) != 0 && !data.Dissolved) {\n            cc.find(\"Canvas/JoinClubToastLayer/bg_join_private_room/clubName\").getComponent(cc.Label).string = data.ClubName;\n            this.joinClubLayer.active = false;\n            this.joinClubToastLayer.active = true;\n        } else {\n            this._showTips(\"The club does not exist\");\n        }\n    },\n\n    onBtnCreateClubConfirmClicked () {\n        if (this.newClubName.string == \"\") {\n            this._showTips(\"Please enter the club name\");\n            return;\n        }\n        if (cc.dgame.settings.account.Chips < this._createClubThreshold) {\n            this._showTips(\"You need to have at least \" + this._createClubThreshold + \" chips to create a club\");\n            return;\n        }\n        cc.dgame.normalLoading.startInvokeWaiting();\n        var newclub_cmd = {\n            ClubName: this.newClubName.string,\n        }\n        cc.dgame.net.gameCall([\"createClub\", JSON.stringify(newclub_cmd)], this._onCreateClub.bind(this));\n    },\n\n    _onCreateClub (data) {\n        Log.Trace(\"[_onCreateClub]\");\n        //this.schedule(this._checkMyClub, 5);\n        //this._checkMyClubCount = 0;\n    },\n\n    _handleNewClub (clubInfo) {\n        Log.Trace(\"[_handleNewClub] \" + JSON.stringify(clubInfo))\n        this.createClubLayer.active = false;\n        if (clubInfo.Errstr != \"\") {\n            cc.dgame.normalLoading.stopInvokeWaiting();\n            this._showTips(\"Create club failed.(\" + clubInfo.Errstr + \")\");\n            return;\n        }\n        this._showTips(\"You have created this club\");\n        this.updateClubID(clubInfo.ClubID);\n    },\n\n    onBtnCreateRoomClicked () {\n        cc.director.loadScene(\"CreateTable\");\n    },\n\n    onBtnJoinClubApplyClicked () {\n        this.joinClubToastLayer.active = false;\n        var joinclub_cmd = {\n            ClubID: this.joinClubID,\n        }\n        cc.dgame.net.gameCall([\"joinClub\", JSON.stringify(joinclub_cmd)], this._onJoinClub.bind(this));\n    },\n\n    _onJoinClub (data) {\n        this._showTips(\"You have applied to join and wait for the administrator to confirm\");\n    },\n\n    _handleJoinClubApproved (clubInfo) {\n        Log.Trace(\"[_handleJoinClubApproved] \" + JSON.stringify(clubInfo))\n        if (clubInfo.Errstr != \"\") {\n            this._showTips(clubInfo.Errstr);\n            return;\n        }\n        this.updateClubID(clubInfo.ClubID);\n    },\n\n    _handleJoinClub (clubInfo) {\n        Log.Trace(\"[_handleJoinClub] \" + JSON.stringify(clubInfo))\n        if (clubInfo.Errstr != \"\") {\n            this._showTips(clubInfo.Errstr);\n            return;\n        }\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n    },\n\n    onBtnJoinClubCanceClicked () {\n        this.joinClubToastLayer.active = false;\n    },\n\n    onBtnShowClubMembersClicked () {\n        if (this.ownerAddr == cc.dgame.settings.account.Addr) {\n            this.btnKickout.active = true;\n            this.btnDissolve.active = true;\n            this.btnKickoutCancel.active = false;\n            this.btnKickoutConfirm.active = false;\n            this.btnQuitClub.active = false;\n        } else {\n            this.btnKickout.active = false;\n            this.btnDissolve.active = false;\n            this.btnKickoutCancel.active = false;\n            this.btnKickoutConfirm.active = false;\n            this.btnQuitClub.active = true;\n        }\n        this.clubMembersLayer.active = true;\n    },\n\n    onBtnCloseClubMembersClicked () {\n        this.clubMembersLayer.active = false;\n    },\n\n    onBtnKickoutClicked () {\n        for (let i = 0; i < this.clubMembersLayout.node.getChildren().length; i++) {\n            let clubMember = this.clubMembersLayout.node.getChildren()[i].getComponent(\"ClubMemberItem\");\n            if (clubMember.accountAddr != this.ownerAddr) {\n                clubMember.preSelect();\n            }\n        }\n        this.btnKickout.active = false;\n        this.btnDissolve.active = false;\n        this.btnKickoutCancel.active = true;\n        this.btnKickoutConfirm.active = false;\n        this.btnQuitClub.active = false;\n    },\n\n    onBtnDissolveClicked () {\n        this.onBtnCloseClubMembersClicked();\n        this.dissolveClubToastLayer.active = true;\n    },\n\n    onBtnDissolveClubToastDissolveClicked () {\n        this.dissolveClubToastLayer.active = false;\n        cc.dgame.normalLoading.startInvokeWaiting();\n        var dissolveclub_cmd = {\n            ClubID: cc.dgame.settings.account.ClubID,\n        }\n        cc.dgame.net.gameCall([\"dissolveClub\", JSON.stringify(dissolveclub_cmd)], this._onDissolveClub.bind(this));\n    },\n\n    _onDissolveClub (data) {\n        Log.Trace(\"[_onDissolveClub]\");\n        this.schedule(this._checkCloseClub, 5);\n        this._checkCloseClubCount = 0;\n    },\n\n    _checkCloseClub () {\n        this._checkCloseClubCount++;\n        if (this._checkCloseClubCount > 3) {\n            cc.dgame.normalLoading.stopInvokeWaiting();\n            this._showTips(\"Dissolve club failed.\");\n            this.unschedule(this._checkCloseClub);\n            return;\n        }\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onCheckCloseClub.bind(this));\n    },\n\n    _onCheckCloseClub (data) {\n        Log.Trace(\"[_onCheckCloseClub] \" + JSON.stringify(data));\n        if (!data || !data.length) {\n            cc.dgame.normalLoading.stopInvokeWaiting();\n            this.unschedule(this._checkCloseClub);\n            this._showTips(\"Successfully dismiss the club\");\n            this._onMyClubs(data);\n        } else {\n            let foundClub = false;\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].OwnerAddr == cc.dgame.settings.account.Addr) {\n                    foundClub = true;\n                    break;\n                }\n            }\n            if (!foundClub) {\n                cc.dgame.normalLoading.stopInvokeWaiting();\n                this.unschedule(this._checkCloseClub);\n                this._showTips(\"Successfully dismiss the club\");\n                this._onMyClubs(data);\n            }\n        }\n    },\n\n    onBtnDissolveClubToastCancelClicked () {\n        this.dissolveClubToastLayer.active = false;\n    },\n\n    onBtnKickoutToastConfirmClicked () {\n        this.kickoutMemberToastLayer.active = false;\n        var kickout_cmd = {\n            ClubID: cc.dgame.settings.account.ClubID,\n            Addr: this.kickoutAddr,\n        }\n        cc.dgame.net.gameCall([\"denyJoinClub\", JSON.stringify(kickout_cmd)], this._onKickout.bind(this));\n    },\n\n    _onKickout () {\n        let clubMembers = new Array();\n        for (let i = 0; i < this.clubMembersLayout.node.getChildren().length; i++) {\n            let clubMember = this.clubMembersLayout.node.getChildren()[i].getComponent(\"ClubMemberItem\");\n            if (clubMember.accountAddr != this.kickoutAddr) {\n                clubMembers.push(clubMember.accountAddr);\n            }\n        }\n\n        this.clubMembersLayout.node.removeAllChildren();\n        for (let i = 0; i < clubMembers.length; i++) {\n            let clubMember = cc.instantiate(this.clubMemberItem);\n            clubMember.getComponent(\"ClubMemberItem\").init(clubMembers[i], this.ownerAddr);\n            this.clubMembersLayout.node.addChild(clubMember);\n            if (clubMembers[i] != this.ownerAddr) {\n                clubMember.getComponent(\"ClubMemberItem\").preSelect();\n            }\n        }\n    },\n\n    onBtnKickoutToastCancelClicked () {\n        this.kickoutMemberToastLayer.active = false;\n    },\n\n    onBtnKickoutCancelClicked () {\n        for (let i = 0; i < this.clubMembersLayout.node.getChildren().length; i++) {\n            let clubMember = this.clubMembersLayout.node.getChildren()[i].getComponent(\"ClubMemberItem\");\n            clubMember.unpreSelect();\n        }\n        this.btnKickout.active = true;\n        this.btnDissolve.active = true;\n        this.btnKickoutCancel.active = false;\n        this.btnKickoutConfirm.active = false;\n        this.btnQuitClub.active = false;\n    },\n\n    onBtnQuitClubClicked () {\n        this.quitClubToastLayer.active = true;\n    },\n\n    onBtnQuitClubConfirmClicked () {\n        this.quitClubToastLayer.active = false;\n        this.clubMembersLayer.active = false;\n        cc.dgame.normalLoading.startInvokeWaiting();\n        var quitclub_cmd = {\n            ClubID: cc.dgame.settings.account.ClubID,\n        }\n        cc.dgame.net.gameCall([\"quitClub\", JSON.stringify(quitclub_cmd)], this._onQuitClub.bind(this));\n    },\n\n    _onQuitClub (data) {\n        this.schedule(this._checkQuitClub, 5);\n        this._checkQuitClubCount = 0;\n    },\n\n    _checkQuitClub () {\n        this._checkQuitClubCount++;\n        if (this._checkQuitClubCount > 3) {\n            cc.dgame.normalLoading.stopInvokeWaiting();\n            this._showTips(\"Quit club failed.\");\n            this.unschedule(this._checkQuitClub);\n            return;\n        }\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onCheckQuitClub.bind(this));\n    },\n\n    _onCheckQuitClub (data) {\n        Log.Trace(\"[_onCheckQuitClub] \" + JSON.stringify(data));\n        if (!data || !data.length) {\n            cc.dgame.normalLoading.stopInvokeWaiting();\n            this.unschedule(this._checkQuitClub);\n            this._showTips(\"Successfully quit the club\");\n            this._onMyClubs(data);\n        } else {\n            let foundClub = false;\n            for (let i = 0; i < data.length; i++) {\n                if (data[i].ClubID == cc.dgame.settings.account.ClubID) {\n                    foundClub = true;\n                    break;\n                }\n            }\n            if (!foundClub) {\n                cc.dgame.normalLoading.stopInvokeWaiting();\n                this.unschedule(this._checkQuitClub);\n                this._showTips(\"Successfully quit the club\");\n                this._onMyClubs(data);\n            }\n        }\n    },\n\n    onBtnQuitClubCancelClicked () {\n        this.quitClubToastLayer.active = false;\n    },\n\n    onBtnDropdownClubListClicked () {\n        let dropdownMenu = cc.find(\"Canvas/ClubLayer/scrollview\");\n        let blockLayer = cc.find(\"Canvas/ClubLayer/sprite_splash\");\n        if (dropdownMenu.active) {\n            dropdownMenu.active = false;\n            blockLayer.active = false;\n        } else {\n            let clubMenu = cc.find(\"Canvas/ClubLayer/bg_club_menu\");\n            let menuPos = clubMenu.convertToWorldSpaceAR(cc.v2(0, 0));\n            let dropdownPos = dropdownMenu.convertToWorldSpaceAR(cc.v2(0, 0));\n            dropdownPos.y = menuPos.y - clubMenu.height / 2;    //菜单下边\n            dropdownMenu.setPosition(dropdownMenu.parent.convertToNodeSpaceAR(dropdownPos));\n            dropdownMenu.active = true;\n            blockLayer.active = true;\n        }\n    },\n\n    _onMyClubs (data) {\n        //[{\"ClubID\":685038,\"ClubName\":\"test\",\"Dissolved\":false,\"OwnerAddr\":\"0xe2A04360345EeCE3d7e781B652A998cfaaD559A8\"}]\n        Log.Trace(\"[_onMyClubs] \" + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        cc.dgame.normalLoading.stopInvokeWaiting();\n        this._masterClubIDs = new Array();\n        if (!data || !data.length) {\n        } else {\n            for (let i = 0; i < data.length; i++) {\n                if (!data[i].Dissolved) {\n                    //没解散的俱乐部显示在列表中\n                    if (cc.dgame.settings.account.Addr == data[i].OwnerAddr) {\n                        this._masterClubIDs.push(data[i].ClubID);\n                    }\n                }\n            }\n        }\n        Log.Trace(\"[ClubHall:_onMyClubs] masterClubID: \" + JSON.stringify(this._masterClubIDs));\n        //监听我是群主的俱乐部ID的加入申请\n        cc.dgame.net.gameCall([\"joinClubIDs\", JSON.stringify(this._masterClubIDs)]);\n\n        if (!data || !data.length) {\n            this.noClubLayer.active = true;\n            this.clubLayer.active = false;\n            delete cc.dgame.settings.account.ClubID;\n            this.currentClubID.string = \"\";\n            cc.dgame.net.gameCall([\"unsubscribeCreateTable\", \"\"]);\n            cc.sys.localStorage.setItem(\"currentAccount\", JSON.stringify(cc.dgame.settings.account));\n            this.unschedule(this._checkApplications);\n            return;\n        }\n\n        this.clubList = new Array();\n        for (let i = 0; i < data.length; i++) {\n            //自行退出已解散的俱乐部\n            if (data[i].Dissolved) {\n                var quitclub_cmd = {\n                    ClubID: data[i].ClubID,\n                }\n                cc.dgame.net.gameCall([\"quitClub\", JSON.stringify(quitclub_cmd)], this._onQuitClub.bind(this));\n            } else {\n                //没解散的俱乐部显示在列表中\n                this.clubList.push(data[i]);\n            }\n        }\n        if (this.clubList.length == 0) {\n            this.noClubLayer.active = true;\n            this.clubLayer.active = false;\n            delete cc.dgame.settings.account.ClubID;\n            this.currentClubID.string = \"\";\n            cc.sys.localStorage.setItem(\"currentAccount\", JSON.stringify(cc.dgame.settings.account));\n            this.unschedule(this._checkApplications);\n            return;\n        }\n        //已选ClubID合法性判断，在ClubList中则保留，否则置空\n        if (!!cc.dgame.settings.account.ClubID && parseInt(cc.dgame.settings.account.ClubID) > 0) {\n            let valid = false;\n            for (let i = 0; i < data.length; i++) {\n                if (parseInt(cc.dgame.settings.account.ClubID) == parseInt(data[i].ClubID)) {\n                    valid = true;\n                    break;\n                }\n            }\n            if (!valid) {\n                delete cc.dgame.settings.account.ClubID;\n            }\n        }\n        //若已选ClubID置为空，则从ClubList中随机挑一个ClubID\n        if (!cc.dgame.settings.account.ClubID) {\n            cc.dgame.settings.account.ClubID = this.clubList[parseInt(Math.random() * this.clubList.length)].ClubID;\n        }\n        //判断是否为某个俱乐部的群主，是否为当前俱乐部群主\n        for (let i = 0; i < this.clubList.length; i++) {\n            if (cc.dgame.settings.account.Addr == this.clubList[i].OwnerAddr) {\n                this._isClubMaster = true;\n                if (cc.dgame.settings.account.ClubID == this.clubList[i].ClubID) {\n                    this._isSelectedClubMaster = true;\n                } else {\n                    this._isSelectedClubMaster = false;\n                }\n            }\n        }\n\n        this.noClubLayer.active = false;\n        this.clubLayer.active = true;\n        this._updateClubMenu(this.clubList, this._isClubMaster);\n        cc.dgame.refresh.refreshClubList();\n        var clubmembers_cmd = {\n            ClubID: cc.dgame.settings.account.ClubID,\n        }\n        cc.dgame.net.gameCall([\"clubMembers\", JSON.stringify(clubmembers_cmd)], this._onClubMembers.bind(this));\n        if (this._isSelectedClubMaster) {\n            this.btnCreateRoom.active = true;\n        } else {\n            this.btnCreateRoom.active = false;\n        }\n    },\n\n    _onNewClub (data) {\n        Log.Trace('[_onNewClub] currentScene: ' + cc.director.getScene().name + ', ' + JSON.stringify(data));\n        cc.dgame.normalLoading.stopInvokeWaiting();\n        this.createClubLayer.active = false;\n        this._showTips(\"You have created this club\");\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n    },\n\n    _updateClubMenu (clubList, isMaster) {\n        Log.Trace(\"[_updateClubMenu] \" + cc.dgame.settings.account.ClubID);\n        this.onBtnDropdownClubListClicked();\n        this.currentClubID.string = cc.dgame.utils.formatClubID(cc.dgame.settings.account.ClubID);\n        this.ownerAddr = this.getMasterByClubID(cc.dgame.settings.account.ClubID);\n        if (this.ownerAddr == \"\") {\n            cc.dgame.net.gameCall([\"unsubscribeCreateTable\", \"\"]);\n        } else if (this.ownerAddr != cc.dgame.settings.account.Addr) {\n            let subCreateTable_cmd = {\n                OwnerAddr: this.ownerAddr,\n            }\n            cc.dgame.net.gameCall([\"subscribeCreateTable\", JSON.stringify(subCreateTable_cmd)]);\n        }\n        cc.find(\"Canvas/ClubLayer/scrollview\").getComponent(\"ClubList\").populateList(clubList, isMaster);\n        cc.sys.localStorage.setItem(\"currentAccount\", JSON.stringify(cc.dgame.settings.account));\n        this.onBtnDropdownClubListClicked();\n        this._applicationIcon();\n    },\n\n    updateClubID (clubID) {\n        cc.dgame.settings.account.ClubID = clubID;\n        cc.sys.localStorage.setItem(\"currentAccount\", JSON.stringify(cc.dgame.settings.account));\n        Log.Trace(\"[updateClubID] \" + cc.dgame.settings.account.ClubID);\n        this.currentClubID.string = cc.dgame.utils.formatClubID(clubID);\n        this.ownerAddr = this.getMasterByClubID(cc.dgame.settings.account.ClubID);\n        if (this.ownerAddr == \"\") {\n            cc.dgame.net.gameCall([\"unsubscribeCreateTable\", \"\"]);\n        } else if (this.ownerAddr != cc.dgame.settings.account.Addr) {\n            let subCreateTable_cmd = {\n                OwnerAddr: this.ownerAddr,\n            }\n            cc.dgame.net.gameCall([\"subscribeCreateTable\", JSON.stringify(subCreateTable_cmd)]);\n        }\n        cc.find(\"Canvas/ClubLayer/scrollview\").active = false;\n        this._applicationIcon();\n        cc.dgame.net.gameCall([\"myClubs\", \"\"], this._onMyClubs.bind(this));\n    },\n\n    _applicationIcon () {\n        let notification = cc.find(\"Canvas/ClubLayer/layout/btn_club_notification\");\n        //本人为选中俱乐部的群主\n        if (this.ownerAddr == cc.dgame.settings.account.Addr) {\n            this._checkApplications();\n            this.schedule(this._checkApplications, 60);\n            notification.active = true;\n        } else {\n            notification.active = false;\n            this.unschedule(this._checkApplications);\n        }\n    },\n\n    _checkApplications () {\n        cc.dgame.net.gameCall([\"getJoinClubApplications\", JSON.stringify(this._masterClubIDs)], this._onGetJoinClubApplications.bind(this));\n    },\n\n    _onGetJoinClubApplications (data) {\n        Log.Trace('[_onGetJoinClubApplications] currentScene: ' + cc.director.getScene().name + ', ' + JSON.stringify(data));\n        let newAppliers = cc.find(\"Canvas/ClubLayer/layout/btn_club_notification/bg_club_nofitication_number\");\n        let applierNum = cc.find(\"Canvas/ClubLayer/layout/btn_club_notification/bg_club_nofitication_number/richtext\").getComponent(cc.RichText);\n        this._applicationList = data;\n        let count = 0;\n        for (let clubid in this._applicationList) {\n            if (!!this._applicationList[clubid] && !!this._applicationList[clubid].length) {\n                count += this._applicationList[clubid].length;\n            }\n        }\n        if (count > 0) {\n            newAppliers.active = true;\n            applierNum.string = cc.dgame.utils.formatRichText(count, \"#ffffff\", true, false);\n        } else {\n            newAppliers.active = false;\n        }\n    },\n\n    _updateApplicationList () {\n        this.clubApplicationLayout.node.removeAllChildren();\n        for (let clubid in this._applicationList) {\n            if (!!this._applicationList[clubid].length) {\n                for (let i = 0; i < this._applicationList[clubid].length; i++) {\n                    let clubApplication = cc.instantiate(this.clubApplicationItem);\n                    clubApplication.getComponent(\"ClubApplicationItem\").init(cc.director.getScene().name, parseInt(clubid), this._applicationList[clubid][i]);\n                    this.clubApplicationLayout.node.addChild(clubApplication);\n                }\n            }\n        }\n    },\n\n    getMasterByClubID (clubID) {\n        for (let i = 0; i < this.clubList.length; i++) {\n            if (this.clubList[i].ClubID == clubID) {\n                return this.clubList[i].OwnerAddr;\n            }\n        }\n        return \"\";\n    },\n\n    _onClubMembers (data) {\n        Log.Trace('[_onClubMembers] currentScene: ' + cc.director.getScene().name + ', ' + JSON.stringify(data));\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        this.onBtnShowClubMembersClicked();\n        this.clubMembersLayout.node.removeAllChildren();\n\n        for (let i = 0; i < data.length; i++) {\n            let clubMember = cc.instantiate(this.clubMemberItem);\n            clubMember.getComponent(\"ClubMemberItem\").init(data[i], this.ownerAddr);\n            this.clubMembersLayout.node.addChild(clubMember);\n        }\n        this.clubMemberNum.string = data.length;\n        this.onBtnCloseClubMembersClicked();\n    },\n\n    showKickoutMemberToast (memberAddr) {\n        let assetMgr = cc.find(\"AssetMgr\").getComponent(\"AssetMgr\");\n        var idx = parseInt(memberAddr.substr(2, 2), 16);\n        if (isNaN(idx)) {\n            idx = 0;\n        }\n        cc.find(\"Canvas/KickoutMemberToastLayer/bg_tips/HeadMask/avatar\").getComponent(cc.Sprite).spriteFrame = assetMgr.heads[idx % 200];\n        cc.find(\"Canvas/KickoutMemberToastLayer/bg_tips/nickname\").getComponent(cc.Label).string = memberAddr.substr(2, 8);\n        this.kickoutAddr = memberAddr;\n        this.kickoutMemberToastLayer.active = true;\n    },\n\n    _showTips (msg) {\n        this.operationTips.string = msg;\n        // 计算宽\n        this.operationTips.overflow = cc.Label.Overflow.NONE;\n        this.operationTips.node.setContentSize(new cc.Size(0, 57));\n        this.operationTips._forceUpdateRenderData();\n        let textWidth = Math.min(this.operationTips.node.width, 630);\n        textWidth = Math.round(textWidth / 42) * 42;\n\n        // 计算高\n        this.operationTips.overflow = cc.Label.Overflow.RESIZE_HEIGHT;\n        this.operationTips.node.setContentSize(new cc.Size(textWidth, 0));\n        this.operationTips._forceUpdateRenderData();\n        let textHeight = this.operationTips.node.height;\n\n        this.operationTips.node.width = textWidth;\n        this.operationTips.node.height = textHeight;\n\n        this.operationTipsBackground.width = this.operationTips.node.width + 60;\n        this.operationTipsBackground.height = this.operationTips.node.height + 15;\n        this.operationTipsBackground.parent.opacity = 255;\n        this.operationTipsBackground.parent.active = true;\n        this.operationTipsBackground.parent.runAction(\n            cc.sequence(\n                cc.delayTime(1.5),\n                cc.fadeOut(1.5),\n            ),\n        );\n    },\n\n    onBtnShowClubApplicationClicked () {\n        this.clubApplicationLayer.active = true;\n        this._updateApplicationList();\n        //for test\n        // let applications = [{\"Addr\":\"0xe2A04360\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0x5806dc65\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0x54ABf71B\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0x2cD3A6D1\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0x9821Fcc8\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0x56725d4A\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0xD23FDeC7\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0xA4Fecb02\",\"Date\":\"2019-10-25\"},{\"Addr\":\"0xd3A221a1\",\"Date\":\"2019-10-25\"}];\n        // this.clubApplicationLayout.node.removeAllChildren();\n        // for (let i = 0; i < applications.length; i++) {\n        //     let clubApplication = cc.instantiate(this.clubApplicationItem);\n        //     clubApplication.getComponent(\"ClubApplicationItem\").init(applications[i]);\n        //     this.clubApplicationLayout.node.addChild(clubApplication);\n        // }\n    },\n\n    onBtnCloseClubApplicationClicked () {\n        this.clubApplicationLayer.active = false;\n    },\n\n    approve (clubid, addr) {\n        this.approveAddr = addr;\n        this.approveClubID = clubid;\n        var approve_cmd = {\n            ClubID: clubid,\n            Addr: addr,\n        }\n        cc.dgame.net.gameCall([\"approveJoinClub\", JSON.stringify(approve_cmd)], this._onApprove.bind(this));\n    },\n\n    deny (clubid, addr) {\n        this.approveAddr = addr;\n        this.approveClubID = clubid;\n        var deny_cmd = {\n            ClubID: clubid,\n            Addr: addr,\n        }\n        cc.dgame.net.gameCall([\"denyJoinClub\", JSON.stringify(deny_cmd)], this._onApprove.bind(this));\n    },\n\n    _onApprove (data) {\n        Log.Trace(\"[_onApprove]\");\n        let applications = new Array();\n        for (let i = 0; i < this.clubApplicationLayout.node.getChildren().length; i++) {\n            let clubApplication = this.clubApplicationLayout.node.getChildren()[i].getComponent(\"ClubApplicationItem\");\n            if (clubApplication.addr != this.approveAddr || clubApplication.clubid != this.approveClubID) {\n                applications.push(this.clubApplicationLayout.node.getChildren()[i]);\n            }\n        }\n\n        this.clubApplicationLayout.node.removeAllChildren();\n        for (let i = 0; i < applications.length; i++) {\n            this.clubApplicationLayout.node.addChild(applications[i]);\n        }\n        let newAppliers = cc.find(\"Canvas/ClubLayer/layout/btn_club_notification/bg_club_nofitication_number\");\n        let applierNum = cc.find(\"Canvas/ClubLayer/layout/btn_club_notification/bg_club_nofitication_number/richtext\").getComponent(cc.RichText);\n        if (applications.length == 0) {\n            newAppliers.active = false;\n        } else {\n            newAppliers.active = true;\n            applierNum.string = cc.dgame.utils.formatRichText(applications.length, \"#ffffff\", true, false);\n        }\n    },\n\n    _handleCreateTable (createTableInfo) {\n        Log.Trace(\"[_handleCreateTable] \" + JSON.stringify(createTableInfo));\n        cc.dgame.refresh.onBtnRefreshClicked();\n    },\n});\n"]}