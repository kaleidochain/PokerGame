{"version":3,"sources":["assets/scripts/components/GameReviewPopup.js"],"names":["Log","require","cc","Class","Component","properties","_gameReviewPopup","Node","onLoad","dgame","find","utils","addClickEvent","node","GameResults","Array","Idx","gameReviewPopup","start","onBtnCloseGameReviewClicked","active","onBtnGameReviewClicked","popup","dstv2","getPosition","setPosition","winSize","width","runAction","moveTo","allGameList","JSON","parse","sys","localStorage","getItem","settings","account","Addr","reverse","i","length","Trace","tableid_hand","split","Hand","TableId","gameResult","push","slider","getComponent","Slider","on","event","progress","parseInt","progressBar","ProgressBar","newIdx","_showGameResult","gameTime","Label","string","idx","pot","RichText","blindInfoNode","blindInfo","roomIDNode","roomID","gameReviewPlayerList","gameIndex","formatRichText","formatValue","Pot","FullTableId","BlindInfo","GameTime","INSResultNode","scrollViewWidget","Widget","headerLayer","INSSelfWin","insuranceText","top","y","height","updateAlignment","populateList","PlayerInfo","onBtnFirstGameClicked","onBtnPrevGameClicked","onBtnNextGameClicked","onBtnLastGameClicked","_onVerify","data","stringify","isNative","isMobile","os","OS_IOS","jsb","reflection","callStaticMethod","result","OS_ANDROID","OS_WINDOWS","OS_OSX","openURL","onBtnVerificateClicked","verify_cmd","Tableid","net","gameCall","bind","onBtnReplayClicked","gameReplayPopup","replay","onDestroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require('Log');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _gameReviewPopup: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        if (!cc.dgame) {\r\n            return;\r\n        }\r\n\r\n        this._gameReviewPopup = cc.find(\"Canvas/MenuLayer/GameReviewPopup\");\r\n\r\n        cc.dgame.utils.addClickEvent(cc.find(\"returnBackground\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnCloseGameReviewClicked\");\r\n        if (!!cc.find(\"Canvas/MenuLayer/LeftTopMemuLayer/BtnGameReview\")) {\r\n            cc.dgame.utils.addClickEvent(cc.find(\"Canvas/MenuLayer/LeftTopMemuLayer/BtnGameReview\"), this.node, \"GameReviewPopup\", \"onBtnGameReviewClicked\");\r\n        }\r\n\r\n        cc.dgame.utils.addClickEvent(cc.find(\"sprite_splash/ReplayControlLayer/btnVerify\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnVerificateClicked\");\r\n        cc.dgame.utils.addClickEvent(cc.find(\"sprite_splash/ReplayControlLayer/btnReplay\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnReplayClicked\");\r\n    \r\n        cc.dgame.utils.addClickEvent(cc.find(\"sprite_splash/ReplayControlLayer/ReplayControl/FirstGame\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnFirstGameClicked\");\r\n        cc.dgame.utils.addClickEvent(cc.find(\"sprite_splash/ReplayControlLayer/ReplayControl/PrevGame\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnPrevGameClicked\");\r\n        cc.dgame.utils.addClickEvent(cc.find(\"sprite_splash/ReplayControlLayer/ReplayControl/NextGame\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnNextGameClicked\");\r\n        cc.dgame.utils.addClickEvent(cc.find(\"sprite_splash/ReplayControlLayer/ReplayControl/LastGame\", this._gameReviewPopup), this.node, \"GameReviewPopup\", \"onBtnLastGameClicked\");\r\n\r\n        this.GameResults = new Array();\r\n        this.Idx = 0;\r\n        cc.dgame.gameReviewPopup = this;\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    //点击牌局回顾空白区域关闭牌局回顾对话框\r\n    onBtnCloseGameReviewClicked () {\r\n        this._gameReviewPopup.active = false;\r\n    },\r\n    \r\n    //点击牌局回顾按钮，看有没有设置cc.dgame.gameReviewPopup.Hand，有的话则为大厅的牌局回顾，因为需要点击指定牌局才能显示，此时需要加载所有牌局，牌局回顾与牌局回放在这些牌局中游走；cc.dgame.gameReviewPopup.Hand没有则为牌桌上的牌局回顾\r\n    onBtnGameReviewClicked () {\r\n        let popup = cc.find('sprite_splash', this._gameReviewPopup);\r\n        let dstv2 = popup.getPosition();\r\n        popup.setPosition(cc.winSize.width / 2, 0);\r\n        popup.runAction(\r\n            cc.moveTo(0.2, dstv2),\r\n        );\r\n        this._gameReviewPopup.active = true;\r\n        let allGameList = JSON.parse(cc.sys.localStorage.getItem(cc.dgame.settings.account.Addr + \"_gamelist\"));\r\n        allGameList = allGameList.reverse();\r\n        this.GameResults = new Array();\r\n        for (let i = 0; i < allGameList.length; i++) {\r\n            Log.Trace(\"[\" + (i+1) + \"/\" + allGameList.length + \"]: \" + allGameList[i]);\r\n            let tableid_hand = allGameList[i].split(\"_\");\r\n            if (!this.Hand) {\r\n                //牌桌上的牌局回顾，根据TableId过滤牌局结果\r\n                if (tableid_hand[0] == this.TableId) {\r\n                    let gameResult = JSON.parse(cc.sys.localStorage.getItem(cc.dgame.settings.account.Addr + \"_\" + allGameList[i] + \"_result\"));\r\n                    // Log.Trace(\"[onBtnGameReviewClicked] \" + \"i:\" + i + \" ,gameResult:\" + JSON.stringify(gameResult));\r\n                    this.GameResults.push(gameResult);\r\n                }\r\n            } else {\r\n                let gameResult = JSON.parse(cc.sys.localStorage.getItem(cc.dgame.settings.account.Addr + \"_\" + allGameList[i] + \"_result\"));\r\n                // Log.Trace(\"[onBtnGameReviewClicked] \" + \"i:\" + i + \" ,gameResult:\" + JSON.stringify(gameResult));\r\n                this.GameResults.push(gameResult);\r\n\r\n                //大厅的牌局回顾，显示指定的牌局\r\n                if (tableid_hand[1] == this.Hand && this.TableId == tableid_hand[0]) {\r\n                    this.Idx = i;\r\n                }\r\n            }\r\n        }\r\n        if (!this.Hand) {\r\n            //牌桌上的牌局回顾，默认显示最新一局\r\n            this.Idx = this.GameResults.length - 1;\r\n        }\r\n\r\n        if (this.GameResults.length > 0) {\r\n            //牌局回顾进度条跟随局数滑块\r\n            let slider = cc.find('sprite_splash/ReplayControlLayer/gameReviewSlider', this._gameReviewPopup).getComponent(cc.Slider);\r\n            slider.node.on('slide', function(event) {\r\n                if (this.GameResults.length == 1) {\r\n                    slider.progress = 1;\r\n                } else {\r\n                    slider.progress = parseInt(slider.progress * this.GameResults.length) / this.GameResults.length;\r\n                }\r\n                let progressBar = cc.find('sprite_splash/ReplayControlLayer/gameReviewSlider', this._gameReviewPopup).getComponent(cc.ProgressBar);\r\n                progressBar.progress = slider.progress;\r\n                let newIdx = parseInt(slider.progress * this.GameResults.length);\r\n                if (newIdx != this.Idx) {\r\n                    this._showGameResult(newIdx);\r\n                }\r\n            }, this);\r\n            this._showGameResult(this.Idx);\r\n        } else {\r\n            let gameTime = cc.find('sprite_splash/HeaderLayer/gametime', this._gameReviewPopup).getComponent(cc.Label);\r\n            gameTime.string = '';\r\n        }\r\n    },\r\n\r\n\r\n    //显示下标为idx的牌局结果\r\n    _showGameResult (idx) {\r\n        Log.Trace(\"[_showGameResult] \" + \"idx:\" + idx);\r\n        let pot = cc.find('sprite_splash/HeaderLayer/layout/pot', this._gameReviewPopup).getComponent(cc.RichText);\r\n        let gameTime = cc.find('sprite_splash/HeaderLayer/gametime', this._gameReviewPopup).getComponent(cc.Label);\r\n        let blindInfoNode = cc.find('sprite_splash/HeaderLayer/layout/blindinfo', this._gameReviewPopup);\r\n        let blindInfo = null;\r\n        if (!!blindInfoNode) {\r\n            blindInfo.getComponent(cc.Label);\r\n        }\r\n        let roomIDNode = cc.find('sprite_splash/HeaderLayer/layout/tableid', this._gameReviewPopup);\r\n        let roomID = null;\r\n        if (!!roomIDNode) {\r\n            roomID.getComponent(cc.Label);\r\n        }\r\n        let gameReviewPlayerList = cc.find('sprite_splash/scrollview', this._gameReviewPopup).getComponent('GameReviewPlayerList');\r\n        let gameIndex = cc.find('sprite_splash/ReplayControlLayer/ReplayControl/gameIndex', this._gameReviewPopup).getComponent(cc.Label);\r\n        let slider = cc.find('sprite_splash/ReplayControlLayer/gameReviewSlider', this._gameReviewPopup).getComponent(cc.Slider);\r\n        let progressBar = cc.find('sprite_splash/ReplayControlLayer/gameReviewSlider', this._gameReviewPopup).getComponent(cc.ProgressBar);\r\n        let gameResult = this.GameResults[idx];\r\n        // Log.Trace(\"[_showGameResult] \" + \"gameResult:\" + JSON.stringify(gameResult));\r\n        pot.string = cc.dgame.utils.formatRichText(cc.dgame.utils.formatValue(gameResult.Pot), \"#FFAE44\", true, false);\r\n        if (!!roomID) {\r\n            roomID.string = gameResult.FullTableId;\r\n        }\r\n        if (!!blindInfo) {\r\n            blindInfo.string = gameResult.BlindInfo;\r\n        }\r\n        gameTime.string = gameResult.GameTime;\r\n        gameIndex.string = (idx + 1) + '/' + this.GameResults.length;\r\n        let INSResultNode = cc.find(\"sprite_splash/ins_layer\", this._gameReviewPopup);\r\n        INSResultNode.active = false;\r\n        let scrollViewWidget = cc.find(\"sprite_splash/scrollview\", this._gameReviewPopup).getComponent(cc.Widget);\r\n        let headerLayer = cc.find(\"sprite_splash/HeaderLayer\", this._gameReviewPopup);\r\n        if (gameResult.INSSelfWin != null) {\r\n            Log.Trace(\"[gameResult.INSSelfWin] \" + \"gameResult.INSSelfWin:\" + gameResult.INSSelfWin);\r\n            let insuranceText = cc.find(\"value\", INSResultNode).getComponent(cc.RichText);\r\n            insuranceText.string = cc.dgame.utils.formatRichText(gameResult.INSSelfWin, \"#FFBC1D\", true, false);\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.top:\" + scrollViewWidget.top);\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.y:\" + scrollViewWidget.node.y);\r\n            scrollViewWidget.top = headerLayer.height + INSResultNode.height + 5;\r\n            INSResultNode.active = true;\r\n            scrollViewWidget.updateAlignment();\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.top2:\" + scrollViewWidget.top);\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.node.y2:\" + scrollViewWidget.node.y);\r\n        } else {\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.node.y3:\" + scrollViewWidget.node.y);\r\n            scrollViewWidget.top = headerLayer.height;\r\n            scrollViewWidget.updateAlignment();\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.top3:\" + scrollViewWidget.top);\r\n            Log.Trace(\"[_showGameResult] \" + \"scrollViewWidget.node.y4:\" + scrollViewWidget.node.y);\r\n        }\r\n        gameReviewPlayerList.populateList(gameResult.PlayerInfo);\r\n        this.Idx = idx;\r\n        if (this.GameResults.length > 1) {\r\n            slider.progress = idx / (this.GameResults.length - 1);\r\n            progressBar.progress = slider.progress;\r\n        }\r\n    },\r\n\r\n    //跳到牌局回顾第一局\r\n    onBtnFirstGameClicked () {\r\n        if (this.GameResults.length > 0) {\r\n            this._showGameResult(0);\r\n        }\r\n    },\r\n\r\n    //跳到上一局\r\n    onBtnPrevGameClicked () {\r\n        if (this.GameResults.length > 0 && this.Idx - 1 >= 0) {\r\n            this._showGameResult(this.Idx - 1);\r\n        }\r\n    },\r\n\r\n    //跳到下一局\r\n    onBtnNextGameClicked () {\r\n        if (this.GameResults.length > 0 && this.Idx + 1 < this.GameResults.length) {\r\n            this._showGameResult(this.Idx + 1);\r\n        }\r\n    },\r\n\r\n    //跳到最后一局\r\n    onBtnLastGameClicked () {\r\n        if (this.GameResults.length > 0) {\r\n            this._showGameResult(this.GameResults.length - 1);\r\n        }\r\n    },\r\n\r\n    _onVerify (data) {\r\n        Log.Trace('[_onVerify] ' + typeof(data));\r\n        if (typeof(data) == \"object\") {\r\n            Log.Trace('[_onVerify] ' + JSON.stringify(data));\r\n            if (cc.sys.isNative) {\r\n                if (cc.sys.isMobile) {\r\n                    if (cc.sys.os === cc.sys.OS_IOS) {\r\n                        jsb.reflection.callStaticMethod('NativeGengine', 'openURL:', data.result);\r\n                    } else if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n                        jsb.reflection.callStaticMethod('org/cocos2dx/javascript/AppActivity', 'openURL', '(Ljava/lang/String;)V', data.result);\r\n                    }\r\n                } else if (cc.sys.os === cc.sys.OS_WINDOWS||cc.sys.os === cc.sys.OS_OSX) {\r\n                    openURL(data.result);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    onBtnVerificateClicked () {\r\n        let gameResult = this.GameResults[this.Idx];\r\n        Log.Trace('[onBtnVerificateClicked] Verify TableId: ' + gameResult.TableId + ', Hand: ' + gameResult.Hand);\r\n        var verify_cmd = {\r\n            Tableid: gameResult.TableId,\r\n            Hand: gameResult.Hand\r\n        }\r\n        cc.dgame.net.gameCall(['verify', JSON.stringify(verify_cmd)], this._onVerify.bind(this));\r\n    },\r\n\r\n    onBtnReplayClicked () {\r\n        let gameResult = this.GameResults[this.Idx];\r\n        Log.Trace('[onBtnReplayClicked] Play TableId: ' + gameResult.FullTableId + ', Hand: ' + gameResult.Hand);\r\n        cc.dgame.gameReplayPopup.replay(gameResult.Hand);\r\n    },\r\n\r\n    onDestroy () {\r\n        if (!!cc.dgame) {\r\n            cc.dgame.gameReviewPopup = null;\r\n        }\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}