{"version":3,"sources":["assets/scripts/components/ExchangeRate.js"],"names":["Log","require","cc","Class","Component","properties","onLoad","dgame","exchangeRate","startCheckExchangeRate","_getExchangeRate","schedule","_onExchangeRate","data","Trace","normalLoading","showLoadTimeout","settings","parseFloat","net","gameCall","bind","start","onDestroy","unschedule"],"mappings":";;;;;;AAAA,IAAIA,GAAG,GAAGC,OAAO,CAAC,KAAD,CAAjB;;AAEAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAML;AAEAC,EAAAA,MARK,oBAQK;AACN,QAAI,CAACJ,EAAE,CAACK,KAAR,EAAe;AACX;AACH;;AACDL,IAAAA,EAAE,CAACK,KAAH,CAASC,YAAT,GAAwB,IAAxB;AACH,GAbI;AAeLC,EAAAA,sBAfK,oCAeqB;AACtB,SAAKC,gBAAL;;AACA,SAAKC,QAAL,CAAc,KAAKD,gBAAnB,EAAqC,EAArC;AACH,GAlBI;AAoBLE,EAAAA,eApBK,2BAoBYC,IApBZ,EAoBkB;AACnBb,IAAAA,GAAG,CAACc,KAAJ,CAAU,uBAAuBD,IAAjC;;AACA,QAAIA,IAAI,IAAI,sBAAZ,EAAoC;AAChCX,MAAAA,EAAE,CAACK,KAAH,CAASQ,aAAT,CAAuBC,eAAvB;AACA;AACH;;AACDd,IAAAA,EAAE,CAACK,KAAH,CAASU,QAAT,CAAkBT,YAAlB,GAAiCU,UAAU,CAACL,IAAD,CAAV,GAAmB,IAApD;AACH,GA3BI;AA6BLH,EAAAA,gBA7BK,8BA6Be;AAChBV,IAAAA,GAAG,CAACc,KAAJ,CAAU,qBAAV;AACAZ,IAAAA,EAAE,CAACK,KAAH,CAASY,GAAT,CAAaC,QAAb,CAAsB,CAAC,MAAD,EAAS,EAAT,CAAtB,EAAoC,KAAKR,eAAL,CAAqBS,IAArB,CAA0B,IAA1B,CAApC;AACH,GAhCI;AAkCLC,EAAAA,KAlCK,mBAkCI,CAER,CApCI;AAsCLC,EAAAA,SAtCK,uBAsCQ;AACT,SAAKC,UAAL,CAAgB,KAAKd,gBAArB;;AACA,QAAI,CAAC,CAACR,EAAE,CAACK,KAAT,EAAgB;AACZL,MAAAA,EAAE,CAACK,KAAH,CAASC,YAAT,GAAwB,IAAxB;AACH;AACJ,GA3CI,CA4CL;;AA5CK,CAAT","sourceRoot":"/","sourcesContent":["var Log = require(\"Log\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        if (!cc.dgame) {\n            return;\n        }\n        cc.dgame.exchangeRate = this;\n    },\n\n    startCheckExchangeRate () {\n        this._getExchangeRate();\n        this.schedule(this._getExchangeRate, 60);\n    },\n\n    _onExchangeRate (data) {\n        Log.Trace('[_onExchangeRate] ' + data);\n        if (data == \"Network disconnected\") {\n            cc.dgame.normalLoading.showLoadTimeout();\n            return;\n        }\n        cc.dgame.settings.exchangeRate = parseFloat(data) / 1e18;\n    },\n\n    _getExchangeRate () {\n        Log.Trace(\"onExchangeRateTimer\");\n        cc.dgame.net.gameCall([\"rate\", \"\"], this._onExchangeRate.bind(this));\n    },\n\n    start () {\n\n    },\n\n    onDestroy () {\n        this.unschedule(this._getExchangeRate);\n        if (!!cc.dgame) {\n            cc.dgame.exchangeRate = null;\n        }\n    }\n    // update (dt) {},\n});\n"]}