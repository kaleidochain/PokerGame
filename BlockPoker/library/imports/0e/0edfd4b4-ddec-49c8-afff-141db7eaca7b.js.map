{"version":3,"sources":["assets/scripts/Game/ResultList.js"],"names":["Log","require","cc","Class","Component","properties","scrollView","ScrollView","prefabResultItem","Prefab","prefabResultDateItem","onLoad","content","removeAllChildren","totalNormalItem","pageNum","node","on","Trace","resultHall","find","getComponent","freshPlayedTables","populateList","data","JSON","stringify","PageIndex","tableMap","Tables","Error","date","childrenCount","dateItem","instantiate","initTime","addChild","tableList","i","item","init","update","dt"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require(\"Log\");\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        scrollView: cc.ScrollView,\r\n        prefabResultItem: cc.Prefab,\r\n        prefabResultDateItem: cc.Prefab,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad () {\r\n        this.content = this.scrollView.content;\r\n        this.content.removeAllChildren();\r\n        this.totalNormalItem = 0;\r\n        this.pageNum = 1;\r\n        this.scrollView.node.on('scroll-to-bottom', function (scrollView) {\r\n            Log.Trace(\"scroll-to-bottom this.totalNormalItem:\" + this.totalNormalItem);\r\n            if ( this.totalNormalItem > 0 && this.totalNormalItem%10 == 0 ) {\r\n                this.pageNum += 1;\r\n                var resultHall = cc.find('Result').getComponent('ResultHall');\r\n                resultHall.freshPlayedTables(this.pageNum);\r\n            }\r\n        }, this);\r\n    },\r\n\r\n    populateList (data) {\r\n        if (JSON.stringify(data) == \"{}\") {\r\n            Log.Trace(\"data == {}\");\r\n            return\r\n        }\r\n        let pageNum = data.PageIndex;\r\n        let tableMap = data.Tables;\r\n        Log.Trace(\"ResultList populateList pageNum:\" + pageNum + \" ,\"+ \"tableMap:\" + JSON.stringify(tableMap));\r\n        if (pageNum != this.pageNum) {\r\n            Log.Error(\"populateList error pageNum:\" + pageNum + \" ,this.pageNum:\" + this.pageNum);\r\n            return\r\n        }\r\n        for (let date in tableMap) {\r\n            Log.Trace(\"xxxx date:\" + date);\r\n            Log.Trace(\"this.content.childrenCount1:\" + this.content.childrenCount)\r\n            var dateItem = cc.instantiate(this.prefabResultDateItem);\r\n            dateItem.getComponent('ResultItem').initTime(date);\r\n            this.content.addChild(dateItem);\r\n            let tableList = tableMap[date];\r\n            Log.Trace(\"xxxx tableList:\" + tableList);\r\n            for (let i in tableList) {\r\n                var item = cc.instantiate(this.prefabResultItem);\r\n                item.getComponent('ResultItem').init(tableList[i]);\r\n                this.content.addChild(item);\r\n                this.totalNormalItem += 1;\r\n            }\r\n            Log.Trace(\"this.content.childrenCount2:\" + this.content.childrenCount);\r\n        }\r\n        // this.scrollView.scrollToTop();\r\n    },\r\n\r\n    // called every frame\r\n    update (dt) {\r\n\r\n    },\r\n});\r\n"]}