{"version":3,"sources":["assets/scripts/Net/onfire.js"],"names":["root","factory","module","exports","onfire","window","__onfireEvents","__cnt","string_str","function_str","hasOwnKey","Function","call","bind","Object","hasOwnProperty","slice","Array","prototype","_bind","eventName","callback","is_one","context","Error","_each","obj","key","on","one","_fire_func","args","item","apply","fire","arguments","setTimeout","fireSync","un","event","r","type","key_1","item_1","key_2","item_2","clear"],"mappings":";;;;;;;;AAAA;;;;AAGA;;;;;;AAKA;AACA,CAAC,UAAUA,IAAV,EAAgBC,OAAhB,EAAyB;AACtB,MAAI,QAAOC,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,IAA8BA,MAAM,CAACC,OAAzC,EACID,MAAM,CAACC,OAAP,GAAiBF,OAAO,EAAxB,CADJ,KAGID,IAAI,CAACI,MAAL,GAAcH,OAAO,EAArB;AACP,CALA,CAKC,OAAOI,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,SALD,EAKgD,YAAY;AACzD,MAAIC,cAAc,GAAG,EAArB;AAAA,MACIC,KAAK,GAAG,CADZ;AAAA,MACe;AACXC,EAAAA,UAAU,GAAG,QAFjB;AAAA,MAGIC,YAAY,GAAG,UAHnB;AAAA,MAIIC,SAAS,GAAGC,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBC,MAAM,CAACC,cAA1B,CAJhB;AAAA,MAKIC,KAAK,GAAGL,QAAQ,CAACC,IAAT,CAAcC,IAAd,CAAmBI,KAAK,CAACC,SAAN,CAAgBF,KAAnC,CALZ;;AAOA,WAASG,KAAT,CAAeC,SAAf,EAA0BC,QAA1B,EAAoCC,MAApC,EAA4CC,OAA5C,EAAqD;AACjD,QAAI,QAAOH,SAAP,MAAqBZ,UAArB,IAAmC,QAAOa,QAAP,MAAoBZ,YAA3D,EAAyE;AACrE,YAAM,IAAIe,KAAJ,CAAU,WAAShB,UAAT,GAAoB,IAApB,GAAyBC,YAAzB,GAAsC,EAAhD,CAAN;AACH;;AACD,QAAI,CAAEC,SAAS,CAACJ,cAAD,EAAiBc,SAAjB,CAAf,EAA4C;AACxCd,MAAAA,cAAc,CAACc,SAAD,CAAd,GAA4B,EAA5B;AACH;;AACDd,IAAAA,cAAc,CAACc,SAAD,CAAd,CAA0B,EAAEb,KAA5B,IAAqC,CAACc,QAAD,EAAWC,MAAX,EAAmBC,OAAnB,CAArC;AAEA,WAAO,CAACH,SAAD,EAAYb,KAAZ,CAAP;AACH;;AACD,WAASkB,KAAT,CAAeC,GAAf,EAAoBL,QAApB,EAA8B;AAC1B,SAAK,IAAIM,GAAT,IAAgBD,GAAhB,EAAqB;AACjB,UAAIhB,SAAS,CAACgB,GAAD,EAAMC,GAAN,CAAb,EAAyBN,QAAQ,CAACM,GAAD,EAAMD,GAAG,CAACC,GAAD,CAAT,CAAR;AAC5B;AACJ;AACD;;;;;;;;AAMA,WAASC,EAAT,CAAYR,SAAZ,EAAuBC,QAAvB,EAAiCE,OAAjC,EAA0C;AACtC,WAAOJ,KAAK,CAACC,SAAD,EAAYC,QAAZ,EAAsB,CAAtB,EAAyBE,OAAzB,CAAZ;AACH;AACD;;;;;;;;AAMA,WAASM,GAAT,CAAaT,SAAb,EAAwBC,QAAxB,EAAkCE,OAAlC,EAA2C;AACvC,WAAOJ,KAAK,CAACC,SAAD,EAAYC,QAAZ,EAAsB,CAAtB,EAAyBE,OAAzB,CAAZ;AACH;;AACD,WAASO,UAAT,CAAoBV,SAApB,EAA+BW,IAA/B,EAAqC;AACjC,QAAIrB,SAAS,CAACJ,cAAD,EAAiBc,SAAjB,CAAb,EAA0C;AACtCK,MAAAA,KAAK,CAACnB,cAAc,CAACc,SAAD,CAAf,EAA4B,UAASO,GAAT,EAAcK,IAAd,EAAoB;AACjDA,QAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAAR,CAAcD,IAAI,CAAC,CAAD,CAAlB,EAAuBD,IAAvB,EADiD,CACnB;;AAC9B,YAAIC,IAAI,CAAC,CAAD,CAAR,EAAa,OAAO1B,cAAc,CAACc,SAAD,CAAd,CAA0BO,GAA1B,CAAP,CAFoC,CAEG;AACvD,OAHI,CAAL;AAIH;AACJ;AACD;;;;;;;;AAMA,WAASO,IAAT,CAAcd,SAAd,EAAyB;AACrB;AACA,QAAIW,IAAI,GAAGf,KAAK,CAACmB,SAAD,EAAY,CAAZ,CAAhB;AACAC,IAAAA,UAAU,CAAC,YAAY;AACnBN,MAAAA,UAAU,CAACV,SAAD,EAAYW,IAAZ,CAAV;AACH,KAFS,CAAV;AAGH;AACD;;;;;;;;AAMA,WAASM,QAAT,CAAkBjB,SAAlB,EAA6B;AACzBU,IAAAA,UAAU,CAACV,SAAD,EAAYJ,KAAK,CAACmB,SAAD,EAAY,CAAZ,CAAjB,CAAV;AACH;AACD;;;;;;;;;;;;;;;;;;;AAiBA,WAASG,EAAT,CAAYC,KAAZ,EAAmB;AACf,QAAInB,SAAJ;AAAA,QAAeO,GAAf;AAAA,QAAoBa,CAAC,GAAG,KAAxB;AAAA,QAA+BC,IAAI,WAAUF,KAAV,CAAnC;;AACA,QAAIE,IAAI,KAAKjC,UAAb,EAAyB;AACrB;AACA,UAAIE,SAAS,CAACJ,cAAD,EAAiBiC,KAAjB,CAAb,EAAsC;AAClC,eAAOjC,cAAc,CAACiC,KAAD,CAArB;AACA,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KAPD,MAQK,IAAIE,IAAI,KAAK,QAAb,EAAuB;AACxBrB,MAAAA,SAAS,GAAGmB,KAAK,CAAC,CAAD,CAAjB;AACAZ,MAAAA,GAAG,GAAGY,KAAK,CAAC,CAAD,CAAX;;AACA,UAAI7B,SAAS,CAACJ,cAAD,EAAiBc,SAAjB,CAAT,IAAwCV,SAAS,CAACJ,cAAc,CAACc,SAAD,CAAf,EAA4BO,GAA5B,CAArD,EAAuF;AACnF,eAAOrB,cAAc,CAACc,SAAD,CAAd,CAA0BO,GAA1B,CAAP;AACA,eAAO,IAAP;AACH,OANuB,CAOxB;;;AACA,aAAO,KAAP;AACH,KATI,MAUA,IAAIc,IAAI,KAAKhC,YAAb,EAA2B;AAC5BgB,MAAAA,KAAK,CAACnB,cAAD,EAAiB,UAASoC,KAAT,EAAgBC,MAAhB,EAAwB;AAC1ClB,QAAAA,KAAK,CAACkB,MAAD,EAAS,UAASC,KAAT,EAAgBC,MAAhB,EAAwB;AAClC,cAAIA,MAAM,CAAC,CAAD,CAAN,KAAcN,KAAlB,EAAyB;AACrB,mBAAOjC,cAAc,CAACoC,KAAD,CAAd,CAAsBE,KAAtB,CAAP;AACAJ,YAAAA,CAAC,GAAG,IAAJ;AACH;AACJ,SALI,CAAL;AAMH,OAPI,CAAL;;AAQA,aAAOA,CAAP;AACH;;AACD,WAAO,IAAP;AACH;AACD;;;;;;AAIA,WAASM,KAAT,GAAiB;AACbxC,IAAAA,cAAc,GAAG,EAAjB;AACH;;AACD,SAAO;AACHsB,IAAAA,EAAE,EAAEA,EADD;AAEHC,IAAAA,GAAG,EAAEA,GAFF;AAGHS,IAAAA,EAAE,EAAEA,EAHD;AAIHJ,IAAAA,IAAI,EAAEA,IAJH;AAKHG,IAAAA,QAAQ,EAAEA,QALP;AAMHS,IAAAA,KAAK,EAAEA;AANJ,GAAP;AAQH,CA9IA,CAAD","sourceRoot":"/","sourcesContent":["/**\n * Created by Administrator on 2018/4/17 0017.\n */\n/**\n Copyright (c) 2016 hustcc http://www.atool.org/\n License: MIT\n https://github.com/hustcc/onfire.js\n **/\n/* jshint expr: true */\n!function (root, factory) {\n    if (typeof module === 'object' && module.exports)\n        module.exports = factory();\n    else\n        root.onfire = factory();\n}(typeof window !== 'undefined' ? window : this, function () {\n    var __onfireEvents = {},\n        __cnt = 0, // evnet counter\n        string_str = 'string',\n        function_str = 'function',\n        hasOwnKey = Function.call.bind(Object.hasOwnProperty),\n        slice = Function.call.bind(Array.prototype.slice);\n\n    function _bind(eventName, callback, is_one, context) {\n        if (typeof eventName !== string_str || typeof callback !== function_str) {\n            throw new Error('args: '+string_str+', '+function_str+'');\n        }\n        if (! hasOwnKey(__onfireEvents, eventName)) {\n            __onfireEvents[eventName] = {};\n        }\n        __onfireEvents[eventName][++__cnt] = [callback, is_one, context];\n\n        return [eventName, __cnt];\n    }\n    function _each(obj, callback) {\n        for (var key in obj) {\n            if (hasOwnKey(obj, key)) callback(key, obj[key]);\n        }\n    }\n    /**\n     *  onfire.on( event, func, context ) -> Object\n     *  - event (String): The event name to subscribe / bind to\n     *  - func (Function): The function to call when a new event is published / triggered\n     *  Bind / subscribe the event name, and the callback function when event is triggered, will return an event Object\n     **/\n    function on(eventName, callback, context) {\n        return _bind(eventName, callback, 0, context);\n    }\n    /**\n     *  onfire.one( event, func, context ) -> Object\n     *  - event (String): The event name to subscribe / bind to\n     *  - func (Function): The function to call when a new event is published / triggered\n     *  Bind / subscribe the event name, and the callback function when event is triggered only once(can be triggered for one time), will return an event Object\n     **/\n    function one(eventName, callback, context) {\n        return _bind(eventName, callback, 1, context);\n    }\n    function _fire_func(eventName, args) {\n        if (hasOwnKey(__onfireEvents, eventName)) {\n            _each(__onfireEvents[eventName], function(key, item) {\n                item[0].apply(item[2], args); // do the function\n                if (item[1]) delete __onfireEvents[eventName][key]; // when is one, delete it after triggle\n            });\n        }\n    }\n    /**\n     *  onfire.fire( event[, data1 [,data2] ... ] )\n     *  - event (String): The event name to publish\n     *  - data...: The data to pass to subscribers / callbacks\n     *  Async Publishes / fires the the event, passing the data to it's subscribers / callbacks\n     **/\n    function fire(eventName) {\n        // fire events\n        var args = slice(arguments, 1);\n        setTimeout(function () {\n            _fire_func(eventName, args);\n        });\n    }\n    /**\n     *  onfire.fireSync( event[, data1 [,data2] ... ] )\n     *  - event (String): The event name to publish\n     *  - data...: The data to pass to subscribers / callbacks\n     *  Sync Publishes / fires the the event, passing the data to it's subscribers / callbacks\n     **/\n    function fireSync(eventName) {\n        _fire_func(eventName, slice(arguments, 1));\n    }\n    /**\n     * onfire.un( event ) -> Boolean\n     *  - event (String / Object): The message to publish\n     * When passed a event Object, removes a specific subscription.\n     * When passed event name String, removes all subscriptions for that event name(hierarchy)\n     *\n     * Unsubscribe / unbind an event or event object.\n     *\n     * Examples\n     *\n     *  // Example 1 - unsubscribing with a event object\n     *  var event_object = onfire.on('my_event', myFunc);\n     *  onfire.un(event_object);\n     *\n     *  // Example 2 - unsubscribing with a event name string\n     *  onfire.un('my_event');\n     **/\n    function un(event) {\n        var eventName, key, r = false, type = typeof event;\n        if (type === string_str) {\n            // cancel the event name if exist\n            if (hasOwnKey(__onfireEvents, event)) {\n                delete __onfireEvents[event];\n                return true;\n            }\n            return false;\n        }\n        else if (type === 'object') {\n            eventName = event[0];\n            key = event[1];\n            if (hasOwnKey(__onfireEvents, eventName) && hasOwnKey(__onfireEvents[eventName], key)) {\n                delete __onfireEvents[eventName][key];\n                return true;\n            }\n            // can not find this event, return false\n            return false;\n        }\n        else if (type === function_str) {\n            _each(__onfireEvents, function(key_1, item_1) {\n                _each(item_1, function(key_2, item_2) {\n                    if (item_2[0] === event) {\n                        delete __onfireEvents[key_1][key_2];\n                        r = true;\n                    }\n                });\n            });\n            return r;\n        }\n        return true;\n    }\n    /**\n     *  onfire.clear()\n     *  Clears all subscriptions\n     **/\n    function clear() {\n        __onfireEvents = {};\n    }\n    return {\n        on: on,\n        one: one,\n        un: un,\n        fire: fire,\n        fireSync: fireSync,\n        clear: clear\n    };\n});"]}