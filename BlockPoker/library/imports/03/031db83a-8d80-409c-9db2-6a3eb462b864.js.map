{"version":3,"sources":["assets/scripts/Game/Splash.js"],"names":["Log","require","cc","Class","Component","properties","background","Node","logo","_isValidAccount","accounts","addr","i","length","toLowerCase","onLoad","_showSplash","dgame","Info","net","init","http","gameplay","settings","Utils","utils","ClipboardHelper","clipboard","sceneList","Array","push","director","getScene","name","sys","localStorage","getItem","setting","Language","Sound","setItem","JSON","stringify","parse","CustomOdds","tutorial","Blockchain","TexasHoldem","accountsInfo","isNative","accountsStr","isMobile","os","OS_IOS","jsb","reflection","callStaticMethod","OS_ANDROID","OS_WINDOWS","OS_OSX","GetAccounts","accountsMap","Addr","Nickname","currentAccountInfo","account","removeItem","active","preloadScene","Trace","loadScene","scheduleOnce"],"mappings":"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","sourceRoot":"/","sourcesContent":["var Log = require(\"Log\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        background: cc.Node,\n        logo: cc.Node,\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    _isValidAccount (accounts, addr) {\n        for (let i = 0; i < accounts.length; i++) {\n            if (addr.toLowerCase() == accounts[i].toLowerCase()) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    onLoad: function() {\n        this._showSplash = false;\n        if (!cc.dgame) {\n            Log.Info(\"======================================= Process Start =======================================\");\n            cc.dgame = {};\n            cc.dgame.net = require('Net'); //网络模块，通过websocket连接负责与gengine通讯\n            cc.dgame.net.init();\n            cc.dgame.http = require(\"HTTP\");\n            cc.dgame.gameplay = {}; //牌局信息，保存每个玩家所在位置、玩家账号地址、牌点信息、地主信息等\n            cc.dgame.settings = {}; //设置项，例如使用什么网络（外网、内网）、账号地址等\n    \n            var Utils = require('Utils');\n            cc.dgame.utils = new Utils();\n            var ClipboardHelper = require(\"ClipboardHelper\");\n            cc.dgame.clipboard = new ClipboardHelper();\n            cc.dgame.sceneList = new Array();\n            cc.dgame.sceneList.push(cc.director.getScene().name);\n            this._showSplash = true;\n        }\n        if (!cc.sys.localStorage.getItem(\"setting\")) {\n            let setting = {};\n            setting.Language = \"English\";\n            setting.Sound = true;\n            cc.sys.localStorage.setItem(\"setting\", JSON.stringify(setting));\n        }\n        cc.dgame.settings.setting = JSON.parse(cc.sys.localStorage.getItem(\"setting\"));\n        if (!cc.dgame.settings.setting.CustomOdds) {\n            cc.dgame.settings.setting.CustomOdds = [31, 16, 10, 8, 6, 5, 4, 3.5, 3, 2.5, 2.3, 2, 1.8, 1.6, 1.4, 1.3, 1.2, 1.1, 1.0, 0.8];\n            cc.sys.localStorage.setItem(\"setting\", JSON.stringify(cc.dgame.settings.setting));\n        }\n        if (!cc.sys.localStorage.getItem(\"tutorial\")) {\n            let tutorial = {};\n            tutorial.Blockchain = false;\n            tutorial.TexasHoldem = false;\n            cc.sys.localStorage.setItem(\"tutorial\", JSON.stringify(tutorial));\n        }\n        if (!cc.sys.localStorage.getItem(\"accountsInfo\")) {\n            cc.sys.localStorage.setItem(\"accountsInfo\", \"[]\");\n            cc.dgame.settings.accountsInfo = [];\n        } else {\n            cc.dgame.settings.accountsInfo = JSON.parse(cc.sys.localStorage.getItem(\"accountsInfo\"));\n        }\n        if (!cc.sys.localStorage.getItem(\"mnemonicLanguage\")) {\n            cc.sys.localStorage.setItem(\"mnemonicLanguage\", \"English\");\n        }\n        if (!cc.sys.localStorage.getItem(\"roomType\")) {\n            cc.sys.localStorage.setItem(\"roomType\", 0);\n        }\n        //{\"Addr\":\"0x019Dd28763B06CfC52A0a89efF7610d4FD5e1a6e\",\"Nickname\":\"napster\"}\n        //校验当前账号是否在钱包当中\n        var accounts = new Array(); //通过keystore接口获取实际存在于本地的账号地址\n        if (cc.sys.isNative) {\n            var accountsStr = \"[]\";\n            if (cc.sys.isNative) {\n                if (cc.sys.isMobile) {\n                    if (cc.sys.os == cc.sys.OS_IOS) {\n                        accountsStr = jsb.reflection.callStaticMethod(\"NativeGengine\", \"getAccounts\");\n                        //jsb.reflection.callStaticMethod(\"NativeGengine\", \"deleteAccount:withPassword:\", \"0x24cB4787939604AE5080F6D5C717Ed9C60a9B2E6\", \"qwerasdf\");\n                    } else if (cc.sys.os == cc.sys.OS_ANDROID) {\n                        accountsStr = jsb.reflection.callStaticMethod(\"io/kaleidochain/NativeGengine\", \"getAccounts\", \"()Ljava/lang/String;\");\n                    }    \n                } else {\n                    if (cc.sys.os == cc.sys.OS_WINDOWS||cc.sys.os === cc.sys.OS_OSX) {\n                        accountsStr = GetAccounts();\n                    }\n                }\n            }\n            accounts = JSON.parse(accountsStr);\n            //同步accountsInfo的昵称\n            var accountsInfo = new Array();\n            //先地址去重\n            var accountsMap = {};\n            for (var i = 0; i < cc.dgame.settings.accountsInfo.length; i++) {\n                if (this._isValidAccount(accounts, cc.dgame.settings.accountsInfo[i].Addr)) {\n                    accountsMap[cc.dgame.settings.accountsInfo[i].Addr] = cc.dgame.settings.accountsInfo[i].Nickname;\n                }\n            }\n            for (var addr in accountsMap) {\n                accountsInfo.push({\"Nickname\": accountsMap[addr], \"Addr\": addr});\n            }\n            cc.sys.localStorage.setItem(\"accountsInfo\", JSON.stringify(accountsInfo));\n            cc.dgame.settings.accountsInfo = JSON.parse(cc.sys.localStorage.getItem(\"accountsInfo\"));\n            var currentAccountInfo = cc.sys.localStorage.getItem(\"currentAccount\");\n            if (!currentAccountInfo || currentAccountInfo == \"\") {\n                cc.dgame.settings.account = null;\n            } else {\n                cc.dgame.settings.account = JSON.parse(currentAccountInfo);\n                if (!this._isValidAccount(accounts, cc.dgame.settings.account.Addr)) {\n                    //当前账号不存在了\n                    if (accounts.length > 0) {\n                        //选本地第一个账号\n                        cc.dgame.settings.account = cc.dgame.settings.accountsInfo[0];\n                        cc.sys.localStorage.setItem(\"currentAccount\", JSON.stringify(cc.dgame.settings.account));\n                    } else {\n                        cc.sys.localStorage.removeItem(\"currentAccount\");\n                        cc.dgame.settings.account = null;\n                    }\n                }\n            }\n            //iOS系统使用APP的启动页面\n            if (cc.sys.os == cc.sys.OS_IOS) {\n                this.background.active = false;\n                this.logo.active = false;\n            }\n        }\n        Log.Info(\"cur: \" + JSON.stringify(cc.dgame.settings.account) + \", accounts: \" + JSON.stringify(accounts) + \", accountsInfo: \" + JSON.stringify(cc.dgame.settings.accountsInfo) + \", mnemonicLanguage: \" + cc.sys.localStorage.getItem(\"mnemonicLanguage\"));\n        cc.director.preloadScene('GameHall', function () {\n            Log.Trace('Next scene preloaded');\n        });\n        let tutorial = JSON.parse(cc.sys.localStorage.getItem(\"tutorial\"));\n        if (!tutorial.Blockchain) {\n            cc.director.loadScene(\"BlockchainTutorial\");\n        } else {\n            if (cc.sys.isNative) {\n                if (cc.sys.isMobile) {\n                    if (cc.sys.os == cc.sys.OS_IOS) {\n                        if (!cc.dgame.settings.account) {\n                            cc.director.loadScene('CreateAccount');\n                        } else {\n                            cc.director.loadScene('LoginAccount');\n                        }\n                    } else if (cc.sys.os == cc.sys.OS_ANDROID) {\n                        if (this._showSplash) {\n                            this.scheduleOnce(function () {\n                                if (!cc.dgame.settings.account) {\n                                    cc.director.loadScene('CreateAccount');\n                                } else {\n                                    cc.director.loadScene('LoginAccount');\n                                }\n                            }, 2);\n                        } else {\n                            if (!cc.dgame.settings.account) {\n                                cc.director.loadScene('CreateAccount');\n                            } else {\n                                cc.director.loadScene('LoginAccount');\n                            }\n                        }\n                    }\n                } else {\n                    if (cc.sys.os == cc.sys.OS_WINDOWS||cc.sys.os === cc.sys.OS_OSX) {\n                        if (!cc.dgame.settings.account) {\n                            cc.director.loadScene('CreateAccount');\n                        } else {\n                            cc.director.loadScene('LoginAccount');\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    // update (dt) {},\n});\n"]}